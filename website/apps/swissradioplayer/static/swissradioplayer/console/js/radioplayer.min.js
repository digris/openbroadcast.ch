window.radioplayer||(window.radioplayer=radioplayer);window.console||(window.console={log:function(){},dir:function(){}});
var radioplayer={config_opts:{prod_api:{stationList:"//static."+domainName+"/v1/json/StationList",init:"//cookie."+domainName+"/cm/",search:"//search."+domainName+"/qp/v3/search",suggest:"//search."+domainName+"/qp/v3/suggest",onAir:"//search."+domainName+"/qp/v3/onair",pollOnAir:"//np."+domainName+"/qp/v3/onair",nowNext:"//np."+domainName+"/qp/v3/events",onDemand:"//search."+domainName+"/qp/v3/oditem",recommend:"//search."+domainName+"/qp/v3/recommend",az:"//search."+domainName+"/qp/v3/stations"},
dev_api:{stationList:"/v1/json/StationList",init:"/cm/",search:"/qp/v3/search",suggest:"/qp/v3/suggest",onAir:"/qp/v3/onair",pollOnAir:"/qp/v3/onair",nowNext:"/qp/v3/events",onDemand:"/qp/v3/oditem",recommend:"/qp/v3/recommend",az:"/qp/v3/stations"}},consts:{consolelog:!0,is_responsive:!1,block_now_next:!1,is_iOS:!1,is_Android:!1,reduced_func:!1,assetBaseUrl:"",force_reduced_func:!1,show_cookie_anno:!0,show_cookie_demo:!1,use_global_cookie_settings:!0,cookie_anno_ttl:31536E4,api:{},iframe:{analytics:"//static."+
domainName+"/v3/analytics.html"}},services:{},emp:{},controls:{},playing:{},overlay:{},mystations:{},history:{},search:{},lang:{},utils:{},adswizz:{},vast:{},build:{version:"3.2.3"},settings:{lastplayed:currentStationID,presets:[],history:[],stationlistprefix:"",guid:""},stnList:{},querystring:{},initFailTimeout:null,startAtSeconds:0,themeColour:"dark",mouseActive:!1,objs:{body:null,searchBox:null,searchInput:null,overlayContainer:null,stickyLetterDivide:null,suggestContainer:null,searchContainer:null,
searchKeywords:null,searchResults:null,searchAllContainer:null,searchLiveContainer:null,searchODContainer:null,nowPlayingStrip:null,scrollingContainer:null,scrollingText:null},initPlayback:function(){radioplayer.initFailTimeout=setTimeout(function(){radioplayer.services.alerts.init();vastAds.enabled||tritonAds.enabled||(window.audioArray&&window.audioArray.length&&radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime),radioplayer.emp.dataReady())},5E3);var a="?callback\x3dradioplayer.services.receiveInit";
radioplayer.querystring.stationlistprefix&&(a+="\x26stationlistprefix\x3d"+radioplayer.querystring.stationlistprefix.toLowerCase());radioplayer.consts.force_reduced_func?radioplayer.services.getAPI(radioplayer.consts.api.init+"init/"+currentStationID+a):radioplayer.services.saveCookie("primed/s","primed","true",function(){radioplayer.services.getAPI(radioplayer.consts.api.init+"init/"+currentStationID+a)})},setLanguage:function(a){a="lang_"+a;radioplayer.lang="undefined"!=typeof radioplayer[a]?radioplayer[a]:
radioplayer.lang_en},init:function(){radioplayer.setLanguage(langCode);document.documentElement.setAttribute("data-useragent",navigator.userAgent);radioplayer.querystring=radioplayer.utils.getQueryStringObj();radioplayer.consts.is_responsive=isResponsive||!1;radioplayer.consts.use_global_cookie_settings=useGlobalCookieSettings||!1;radioplayer.consts.assetBaseUrl=assetBaseUrl?assetBaseUrl:radioplayer.consts.assetBaseUrl;radioplayer.consts.flashToUseAssetBaseUrl=flashToUseAssetBaseUrl||!1;radioplayer.consts.customVastURLHandler=
customVastURLHandler||null;radioplayer.querystring.devapi?(radioplayer.config_opts.dev_api.stationList="//"+radioplayer.querystring.devapi+"/v1/json/StationList",radioplayer.config_opts.dev_api.init="//"+radioplayer.querystring.devapi+"/cm/",radioplayer.config_opts.dev_api.search="//"+radioplayer.querystring.devapi+"/qp/v3/search",radioplayer.config_opts.dev_api.suggest="//"+radioplayer.querystring.devapi+"/qp/v3/suggest",radioplayer.config_opts.dev_api.onAir="//"+radioplayer.querystring.devapi+"/qp/v3/onair",
radioplayer.config_opts.dev_api.pollOnAir="//"+radioplayer.querystring.devapi+"/qp/v3/onair",radioplayer.config_opts.dev_api.nowNext="//"+radioplayer.querystring.devapi+"/qp/v3/events",radioplayer.config_opts.dev_api.onDemand="//"+radioplayer.querystring.devapi+"/qp/v3/oditem",radioplayer.config_opts.dev_api.recommend="//"+radioplayer.querystring.devapi+"/qp/v3/recommend",radioplayer.config_opts.dev_api.az="//"+radioplayer.querystring.devapi+"/qp/v3/stations",radioplayer.consts.api=radioplayer.config_opts.dev_api):
radioplayer.consts.api=radioplayer.config_opts.prod_api;radioplayer.consts.is_responsive&&$("body").addClass("responsive-on");radioplayer.consts.is_iOS=/(iPad|iPhone|iPod)/.test(navigator.userAgent);radioplayer.consts.is_Android=/(Android)/.test(navigator.userAgent);radioplayer.consts.is_Android&&$("body").addClass("isAndroid");-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&$("body").addClass("isSafari");window.force_reduced_func&&(radioplayer.consts.force_reduced_func=
!0);radioplayer.consts.force_reduced_func&&(radioplayer.consts.reduced_func=!0);radioplayer.consts.reduced_func&&(radioplayer.consts.reduced_func=!0,$("#toggle-mystations").remove(),$(".menu-container .tabs ul li").eq(0).hide().removeClass("first"),$(".menu-container .tabs ul li").eq(1).hide(),$(".menu-container .tabs ul li").eq(2).css("width","50%").addClass("first"),$(".menu-container .tabs ul li").eq(3).css("width","50%"));$(".radioplayer-globalnav .rp-logo-container .accessibility-text").html(radioplayer.lang.general.radioplayer);
$(".radioplayer-globalnav .menu-btn").attr("title",radioplayer.lang.general.open_menu).find(".menu-btn-accessible").html(radioplayer.lang.general.open_menu);radioplayer.querystring.debug?(radioplayer.consts.consolelog=!0,"true"===radioplayer.querystring.debug.replace("/","")&&(radioplayer.adswizz.DEBUG=!0),"true"===radioplayer.querystring.debug.replace("/","")&&(radioplayer.emp.DEBUG=!0)):window.console={log:function(){},dir:function(){}};console.log("Version: "+radioplayer.build.version);$(".radioplayer").hasClass("light-theme")&&
(radioplayer.consts.themeColour="light");radioplayer.objs.body=$("body");radioplayer.querystring.rpAodUrl&&(audioLive=!1,audioArray=[{audioType:"http",audioUrl:radioplayer.querystring.rpAodUrl}],nowPlayingSource="OD");radioplayer.querystring["force-onboarding"]&&(radioplayer.consts.show_cookie_demo=radioplayer.querystring["force-onboarding"].replace("/",""));radioplayer.querystring.t&&!audioLive&&(radioplayer.startAtSeconds=radioplayer.utils.convertTimeToSeconds(radioplayer.querystring.t),radioplayer.utils.output("start at "+
radioplayer.startAtSeconds+" seconds into OD audio"),$(radioplayer.emp).on("loaded",function(){0<radioplayer.startAtSeconds&&radioplayer.startAtSeconds<=radioplayer.controls.rawDuration/1E3&&(radioplayer.emp.seek(radioplayer.startAtSeconds),radioplayer.startAtSeconds=0)}));vastAds.enabled&&radioplayer.vast.init();tritonAds.enabled&&!vastAds.enabled&&(radioplayer.triton.enabled=!0,radioplayer.triton.init(audioLive));adsWizz.enabled&&!tritonAds.enabled&&radioplayer.adswizz.init();radioplayer.controls.init();
radioplayer.mystations.init();audioLive?radioplayer.playing.init():radioplayer.services.getAPI(radioplayer.consts.api.onDemand+"?odUrl\x3d"+document.location.href+"\x26nameSize\x3d200\x26descriptionSize\x3d200\x26callback\x3dradioplayer.playing.receiveOD");radioplayer.overlay.init();radioplayer.search.init();radioplayer.services.analytics.init();if(!radioplayer.consts.is_responsive){var a=function(){var a=radioplayer.utils.getViewportWidth();360>a&&320<=a?(a/=360,$(".radioplayer-plugin").css("transform",
"scale("+a+")")):360<=a&&$(".radioplayer-plugin").css("transform","scale(1)")};radioplayer.utils&&a()}$(window).on("resize",function(){radioplayer.consts.is_responsive||a();if($("html").hasClass("ie8")){var b=radioplayer.utils.getViewportWidth();340>b?($(".stn-logo").addClass("stn-logo-ie8-xs"),$(".stn-logo").removeClass("stn-logo-ie8")):(390>b?$(".stn-logo").addClass("stn-logo-ie8"):$(".stn-logo").removeClass("stn-logo-ie8"),$(".stn-logo").removeClass("stn-logo-ie8-xs"))}radioplayer.overlay.resizeMenuTabs()});
if($("html").hasClass("ie8")&&$(".stn-logo").css("background-image")&&-1<$(".stn-logo").css("background-image").indexOf("url(")){var b=$(".stn-logo").css("background-image").split("url(")[1].split(")")[0],b=b.replace(/"/g,"");$(".stn-logo").html("\x3cimg src\x3d'"+b+"' /\x3e");$(".stn-logo").css("background-image","none")}$("html").hasClass("ie8")&&(b=radioplayer.utils.getViewportWidth(),340>b?$(".stn-logo").addClass("stn-logo-ie8-xs"):390>b&&$(".stn-logo").addClass("stn-logo-ie8"));$(document).on("mousedown",
function(){radioplayer.mouseActive||(radioplayer.mouseActive=!0,radioplayer.objs.body.addClass("rp-mouseactivity"))}).on("keydown",function(){radioplayer.mouseActive&&(radioplayer.mouseActive=!1,radioplayer.objs.body.removeClass("rp-mouseactivity"))});$(".radioplayer-plugin").on("click","a[data-newstationid]",function(){var a=$(this).attr("data-newstationid"),b=$(this).attr("href");radioplayer.overlay.sidewaysNavigate("Plugin Space",a,b)});radioplayer.initPlayback();b=".jgz";$.browser.msie&&6==$.browser.version&&
(b=".js");radioplayer.services.getAPI(radioplayer.consts.api.stationList+b);$("html").addClass("rp-js")}};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===a)return b;return-1});
radioplayer.utils={output:function(a){radioplayer.consts.consolelog&&console.log(a)},setSelectionRange:function(a,b,c){a.setSelectionRange?(a.focus(),a.setSelectionRange(b,c)):a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveEnd("character",c),a.moveStart("character",b),a.select())},setCaretToPos:function(a,b){radioplayer.utils.setSelectionRange(a,b,b)},getQueryStringObj:function(){return this.getQueryStringObjFromUrl(String(location.search))},getQueryStringObjFromUrl:function(a){a=
a.replace("?","").split("\x26");for(var b={},c=0;c<a.length;c++){var d=a[c].split("\x3d")[0],e=a[c].split("\x3d")[1];b[d]=e}return b},getLocalCookie:function(a){var b="";navigator.cookieEnabled&&(b=(b=document.cookie.match(a+"\x3d([^;]*)"))&&unescape(b[1])||"");return b},setLocalCookie:function(a,b,c,d,e,f){navigator.cookieEnabled&&(a=a+"\x3d"+b,"undefined"!==typeof c&&null!==c&&""!==c&&(a+="; expires\x3d"+c),"undefined"!==typeof d&&null!==d&&""!==d&&(a+="; path\x3d"+d),"undefined"!==typeof e&&null!==
e&&""!==e&&(a+="; domain\x3d"+e),f&&(a+="; secure"),document.cookie=a)},convertTimeToSeconds:function(a){a=a.match(/[0-9]+[HMShms]{1}/g);var b=0,c,d;if($.isArray(a))for(var e=0;e<a.length;e++)c=a[e].charAt(a[e].length-1),d=a[e].substr(0,a[e].length-1),"h"==c?b+=parseInt(3600*d):"m"==c?b+=parseInt(60*d):"s"==c&&(b+=parseInt(d));return b},windowWidth:function(){return"undefined"!==typeof window.outerWidth?window.outerWidth:396},windowHeight:function(){return"undefined"!==typeof window.outerHeight?window.outerHeight:
730},getViewportWidth:function(){var a=window,b="inner";"innerWidth"in window||(b="client",a=document.documentElement||document.body);return a[b+"Width"]},resizeViewPort:function(a,b){window.resizeBy(a-(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),b-(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))}};radioplayer.exceptions={decorateStreamURLException:function(){return{name:"decorateStreamURLException",message:"Could not decorate stream URL."}}};
radioplayer.services={unmuteAfterOverlay:!1,heartbeatCounter:0,heartbeatTimeout:null,annoInterval:null,annoTimeout:null,annoShowing:!1,queuedAnnos:[],cookieTimeout:null,cookieShownInSession:!1,cookieInterval:null,saveCookie:function(a,b,c,d){radioplayer.consts.reduced_func||radioplayer.services.getAPI(radioplayer.consts.api.init+a+("?"+b+"\x3d"+c),d)},receiveInit:function(a){clearTimeout(radioplayer.initFailTimeout);if(a.dead)return radioplayer.services.analytics.sendEvent("Errors","Static Station",
currentStationID,null,null),setTimeout(function(){window.location.href=a.dead.url},100),!1;if(a.redirect)return window.location.href=a.redirect.url,!1;a.primed||(radioplayer.consts.reduced_func=!0,$("#toggle-mystations").remove(),$(".menu-container .tabs ul li").eq(0).hide().removeClass("first"),$(".menu-container .tabs ul li").eq(1).hide(),$(".menu-container .tabs ul li").eq(2).css("width","50%").addClass("first"),$(".menu-container .tabs ul li").eq(3).css("width","50%"));if(!radioplayer.consts.reduced_func){var b=
a.interstitial&&a.interstitial.seen;if(!b&&(window.initOptions&&window.initOptions.interstitial&&window.initOptions.interstitial.enabled&&(a.interstitial=initOptions.interstitial),!b&&a.interstitial&&a.interstitial.url&&""!=a.interstitial.url))return radioplayer.services.saveCookie("interstitial/s","interstitial","true"),setTimeout(function(){var b=document.location.href,c=a.interstitial.url,c=c+((0<c.indexOf("?")?"\x26":"?")+"playerUrl\x3d"+encodeURIComponent(b));window.location.href=c},200),!1}a.volume&&
""!=a.volume&&(radioplayer.controls.currentVolume=a.volume);a.seencookieanno&&radioplayer.consts.use_global_cookie_settings&&(radioplayer.services.alerts.cookies.shown=!0);if(!radioplayer.consts.reduced_func){b=!1;if(a.presets)for(var c=0;c<a.presets.length;c++){var d=a.presets[c].split(":");radioplayer.settings.presets.push(d[1]);d[1]+""==currentStationID+""&&(b=!0)}b?($("#toggle-mystations").children(".icon-heart").addClass("no-animation"),$("#toggle-mystations").addClass("in-mystations").attr("title",
radioplayer.lang.mystations.remove_this).find(".accessibility-text").html(radioplayer.lang.mystations.remove_this)):$("#toggle-mystations").attr("title",radioplayer.lang.mystations.add_this).find(".accessibility-text").html(radioplayer.lang.mystations.add_this)}$(radioplayer.services).trigger("gotPresets");a.lastplayed&&""!=a.lastplayed&&(radioplayer.settings.lastplayed=a.lastplayed);a.history&&(radioplayer.settings.history=a.history);$(radioplayer.services).trigger("gotMyStationsAndHistory");a.stationlistprefix&&
(radioplayer.settings.stationlistprefix=a.stationlistprefix);a.guid&&(radioplayer.settings.guid=a.guid);window.initOptions&&window.initOptions.songaction&&window.initOptions.songaction.enabled&&(a.songaction=initOptions.songaction);a.songaction&&(radioplayer.playing.songAction=a.songaction,$(radioplayer.services).trigger("gotSongAction"));a.scripts&&$.each(a.scripts,function(a,b){radioplayer.services.getAPI(b)});window.audioLive&&a.overridestream&&(window.audioArray="rtmp"==a.overridestream.type?
[{audioType:a.overridestream.type,audioServer:a.overridestream.server,audioEndpoint:a.overridestream.endpoint}]:[{audioType:a.overridestream.type,audioUrl:a.overridestream.url}],window.bufferTime=a.overridestream.buffer);window.audioLive&&a.html5stream&&!a.overridestream&&(b="",b="undefined"!=typeof a.html5stream.type?a.html5stream.type:"http",radioplayer.emp.player.html.audioHTMLFallback=[{audioType:b,audioUrl:a.html5stream.url}]);"undefined"==typeof window.audioArray&&(window.audioArray=[]);vastAds.enabled||
tritonAds.enabled||(radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime),radioplayer.emp.dataReady());window.initOptions&&window.initOptions.overlay&&window.initOptions.overlay.enabled&&(a.overlay=initOptions.overlay);a.overlay&&radioplayer.services.overlay.queue(a.overlay.url,a.overlay.mute);a.announcement?radioplayer.services.alerts.anno.queue(a.announcement.text):radioplayer.consts.reduced_func&&radioplayer.services.alerts.anno.queue(radioplayer.lang.general.reduced_func_anno);
radioplayer.services.alerts.init()},alerts:{showing:!1,interval:null,init:function(){var a=!1;!adsWizz.enabled||radioplayer.controls.streamHasStarted&&!$(".radioplayer").hasClass("has-promo-overlay")||(a=!0);a||vastAds.enabled&&!vastAds.shownVideo||$("body").hasClass("showing-overlay")||tritonAds.enabled?(clearInterval(radioplayer.services.alerts.interval),radioplayer.services.alerts.interval=setInterval(function(){clearInterval(radioplayer.services.alerts.interval);radioplayer.services.alerts.init()},
1500)):(clearInterval(radioplayer.services.alerts.interval),0<radioplayer.services.alerts.anno.pending.length?(a=radioplayer.services.alerts.anno.pending.shift(),radioplayer.services.alerts.anno.show(a)):radioplayer.services.alerts.cookies.shown||($(".radioplayer-anno").length&&$(".radioplayer-anno").remove(),radioplayer.services.alerts.cookies.show()))},cookies:{showing:!1,shown:!1,show:function(){if(radioplayer.consts.reduced_func)return!1;if(radioplayer.consts.show_cookie_anno&&!radioplayer.services.alerts.cookies.shown&&
-1==document.cookie.indexOf("rp-seen-cookie-anno")&&-1==document.cookie.indexOf("seencookieanno")||radioplayer.consts.show_cookie_demo){if(radioplayer.services.alerts.cookies.shown)return!1;document.cookie="rp-seen-cookie-anno\x3dyes;expires\x3d"+(new Date((new Date).getTime()+radioplayer.consts.cookie_anno_ttl)).toGMTString();radioplayer.services.saveCookie("seencookieanno/s","seencookieanno","true");radioplayer.services.alerts.cookies.showing=!0;radioplayer.services.alerts.cookies.shown=!0;$(".cookie-demo-message").html(radioplayer.lang.general.cookie_message);
$(".cookie-heart-text").html(radioplayer.lang.general.cookie_favourites_message);$(".cookie-menu-text").html(radioplayer.lang.general.cookie_menu_message);$(".cookie-demo").addClass("cookie-demo-on");$(".cookie-close-js").on("click",function(){$(".cookie-demo").addClass("cookie-demo--no-animation");radioplayer.services.cookieTimeout&&clearTimeout(radioplayer.services.cookieTimeout);radioplayer.services.alerts.cookies.showing=!1;$(".cookie-demo").removeClass("cookie-demo-on")});radioplayer.services.cookieTimeout=
setTimeout(function(){radioplayer.services.alerts.cookies.showing=!1;$(".cookie-demo").removeClass("cookie-demo-on");clearTimeout(radioplayer.services.cookieTimeout)},1E4)}}},anno:{showing:!1,pending:[],queue:function(a){radioplayer.services.alerts.anno.pending.push(a)},show:function(a,b){radioplayer.services.alerts.showing="anno";$(".radioplayer-anno").length?($(".radioplayer-anno .anno-text").html(a),$(".radioplayer-anno").animate({top:"0px"},600)):($(".radioplayer").append('\x3cdiv class\x3d"radioplayer-anno"\x3e\x3cdiv class\x3d"text-container"\x3e\x3cp class\x3d"anno-text"\x3e'+
a+'\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"logo-container"\x3e\x3ci class\x3d"rp-logo"\x3e\x3c/i\x3e\x3c/div\x3e\x3cdiv class\x3d"close-anno-tab"\x3e\x3ca href\x3d"#" class\x3d"hide-anno"\x3eHide this message\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e'),$(".radioplayer-anno").on("click","a.hide-anno",radioplayer.services.alerts.anno.hide));b||(radioplayer.services.annoTimeout=setTimeout(function(){radioplayer.services.alerts.anno.hide()},15E3))},hide:function(){radioplayer.services.alerts.showing=!1;clearTimeout(radioplayer.services.annoTimeout);
radioplayer.services.saveCookie("announcement/s","announcement","true");$(".radioplayer-anno").animate({top:"-900px"},600,function(){radioplayer.services.alerts.init()})}}},overlay:{showing:!1,initTimeout:null,pending:[],volumeControl:{onOpen:function(a){if(radioplayer.services.unmuteAfterOverlay=a)radioplayer.controls.volumeLocked=!0,radioplayer.consts.is_iOS?(radioplayer.controls.isPlaying&&radioplayer.emp.stop(),radioplayer.controls.showPressPlayPrompt()):(radioplayer.controls.savedVolume=radioplayer.controls.currentVolume,
radioplayer.emp.ready?radioplayer.emp.setVolume(0):(radioplayer.controls.currentVolume=0,radioplayer.controls.onVolumeUpdate("",{volume:0})))},onClose:function(){radioplayer.services.unmuteAfterOverlay&&(radioplayer.controls.volumeLocked=!1,radioplayer.consts.is_iOS?radioplayer.emp.resume():(radioplayer.controls.currentVolume=radioplayer.controls.savedVolume,radioplayer.emp.setVolume(Math.round(radioplayer.controls.savedVolume))))}},queue:function(a,b){var c=!1;!adsWizz.enabled||radioplayer.controls.streamHasStarted&&
!$(".radioplayer").hasClass("has-promo-overlay")||(c=!0);c||vastAds.enabled&&!vastAds.shownVideo||radioplayer.services.overlay.showing||tritonAds.enabled?(radioplayer.services.overlay.pending.length||radioplayer.services.overlay.pending.push({type:"init",params:{url:a,mute:b||!1}}),clearInterval(radioplayer.services.overlay.interval),radioplayer.services.overlay.interval=setInterval(function(){clearInterval(radioplayer.services.overlay.interval);radioplayer.services.overlay.queue(a,b)},4E3)):(clearInterval(radioplayer.services.overlay.interval),
radioplayer.services.overlay.showInit(a,b))},showInit:function(a,b){radioplayer.services.overlay.showing="fromInit";a='\x3cdiv class\x3d"radioplayer-prerolloverlay radioplayer-prerolloverlay-contained"\x3e\x3ciframe class\x3d"iframe-preroll" src\x3d"'+a+'" scrolling\x3d"no" seamless\x3d"seamless"\x3e\x3c/iframe\x3e\x3cdiv class\x3d"radioplayer-preroll-close-frominit"\x3e\x3ca href\x3d"#"\x3e\x3cspan class\x3d"close"\x3e\x26times;\x3c/span\x3e\x3cspan class\x3d"close-text"\x3eClose\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e';
$(".radioplayer-body").append(a);radioplayer.services.overlay.volumeControl.onOpen(b);radioplayer.overlay.initTimeout=setTimeout(function(){radioplayer.services.overlay.hide()},6E4);$(".radioplayer-preroll-close-frominit").on("click",function(a){a.preventDefault();radioplayer.services.overlay.hide()})},adswizz:function(a,b){"adswizz"===radioplayer.services.overlay.showing&&radioplayer.services.overlay.hide();radioplayer.services.overlay.showing="adswizz";$(".radioplayer").addClass("has-promo-overlay");
$(".radioplayer").addClass("adswizz-companion-showing");$(".radioplayer-body").append('\x3cdiv class\x3d"radioplayer-prerolloverlay"\x3e\x3c/div\x3e');$(".radioplayer").append('\x3cdiv class\x3d"radioplayer-preroll-iframe-container"\x3e\x3ciframe class\x3d"radioplayer-preroll-iframe" src\x3d"'+a+'" scrolling\x3d"no" seamless\x3d"seamless"\x3e\x3c/iframe\x3e\x3c/div\x3e\x3cdiv class\x3d"radioplayer-preroll-close"\x3e\x3ca href\x3d"#"\x3e\x3cspan class\x3d"close"\x3e\x26times;\x3c/span\x3e\x3cspan class\x3d"close-text"\x3eClose advert\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e');
$(".radioplayer-localwrapper").append('\x3cdiv class\x3d"adswizz-control-blocker"\x3e\x3c/div\x3e');a=$(".radioplayer-localwrapper").css("background");$(".radioplayer-prerolloverlay").css("background",a);radioplayer.adswizz.overlayTimeout=setTimeout(function(){radioplayer.services.overlay.hide();radioplayer.adswizz.DEBUG&&radioplayer.utils.output("[adswizz] Hiding companion ad in overlay.")},b+1E3);radioplayer.services.overlay.volumeControl.onOpen(!1);$(".radioplayer-preroll-close").on("click",function(a){a.preventDefault();
radioplayer.services.overlay.hide()});$(".adswizz-control-blocker").on("click",function(a){a.preventDefault();radioplayer.services.overlay.hide()})},vast:function(a,b){radioplayer.services.overlay.showing="vast";b=b?!1:!0;$(".radioplayer").addClass("has-promo-overlay");$(".radioplayer-localwrapper").append('\x3cdiv class\x3d"adswizz-control-blocker"\x3e\x3c/div\x3e');$(".radioplayer-body").append('\x3cdiv class\x3d"radioplayer-prerolloverlay"\x3e'+a+"\x3c/div\x3e");if(radioplayer.emp.attemptedInit)radioplayer.services.overlay.volumeControl.onOpen(b)},
hide:function(){radioplayer.services.overlay.showing=!1;null!==radioplayer.adswizz.overlayTimeout&&clearTimeout(radioplayer.adswizz.overlayTimeout);null!==radioplayer.overlay.initTimeout&&clearTimeout(radioplayer.overlay.initTimeout);if(radioplayer.emp.attemptedInit&&!radioplayer.emp.player.flash.used||radioplayer.emp.player.flash.empswf)radioplayer.services.overlay.volumeControl.onClose(!1);$(".radioplayer").removeClass("adswizz-companion-showing");$(".radioplayer").removeClass("has-promo-overlay");
$(".radioplayer-prerolloverlay").remove();$(".radioplayer-preroll-close").remove();$(".radioplayer-preroll-iframe-container").remove();$(".adswizz-control-blocker").remove()}},xDomainIframeCallback:function(a){"post-preroll-proceed"==jQuery.parseJSON(a).method&&radioplayer.services.overlay.hide()},saveMyStationsOrder:function(){for(var a="",b=0;b<radioplayer.settings.presets.length;b++)a+=(""==a?"":",")+b+":"+radioplayer.settings.presets[b];radioplayer.services.saveCookie("ms/s","ms",a)},getAPI:function(a,
b){$.ajax({url:a,dataType:"script",cache:!1,success:function(){"undefined"!==typeof b&&b()}})},analytics:{loaded:!1,$iframe:null,sentInitialMessage:!1,init:function(){radioplayer.services.analytics.$iframe=$("\x3ciframe /\x3e",{src:radioplayer.consts.iframe.analytics+"?rpid\x3d"+currentStationID+"\x26cType\x3d"+(audioLive?"live":"od\x26odUrl\x3d"+audioArray[0].audioUrl),name:"GAAnalytics",id:"GAAnalytics","class":"crossdomain-iframe",load:function(){window.postMessage&&(radioplayer.services.analytics.loaded=
!0,!radioplayer.services.analytics.sentInitialMessage&&0<radioplayer.controls.currentVolume&&radioplayer.controls.isListening&&radioplayer.services.analytics.sendPageview(""),setTimeout(function(){radioplayer.services.analytics.heartbeat()},2E4),$("html").hasClass("ie8")?window.onunload=function(){radioplayer.services.analytics.heartbeat()}:window.onbeforeunload=function(a){radioplayer.services.analytics.heartbeat()})}});radioplayer.objs.body.append(radioplayer.services.analytics.$iframe)},sendEvent:function(a,
b,c,d,e){radioplayer.services.analytics.loaded&&!$("html").hasClass("ie7")&&(radioplayer.utils.output("iframe loaded"),$("#GAAnalytics")[0].contentWindow.postMessage(JSON.stringify({type:"Event",category:a,action:b,label:c,value:d,noninteraction:e}),"*"))},sendPageview:function(a){radioplayer.services.analytics.loaded&&(radioplayer.services.analytics.sentInitialMessage=!0,$("#GAAnalytics")[0].contentWindow.postMessage(JSON.stringify({type:"Pageview",reason:a}),"*"))},heartbeat:function(){radioplayer.services.analytics.loaded&&
$("#GAAnalytics")[0].contentWindow.postMessage(JSON.stringify({type:"Heartbeat"}),"*")}},CrossDomain:{prototype:{_processData:function(a){radioplayer.stnList=a;$(radioplayer.services).trigger("stationListSet")}}}};
radioplayer.emp={DEBUG:!1,player:{},ready:!1,id:"empv3",preferredPlayer:"flash",currentPlayer:"flash",retryCount:5,audioArrayInteger:0,audioPreference:0,event:{mode:"mode",loadProgress:"loadProgress",startPlaying:"startPlaying",pausePlaying:"pausePlaying",resumed:"resumed",stopped:"stopped",cleanedup:"cleanedup",durationSet:"durationSet",ended:"ended",update:"update",volumeSet:"volumeSet",securityError:"securityError",error:"error",noSupport:"noSupport",attemptedInit:!1},init:function(a,b,c,d){this.attemptedInit||
vastAds.enabled||!radioplayer.utils||radioplayer.utils.resizeViewPort(380,665);this.attemptedInit=!0;var e=[];d=d||null;radioplayer.emp.player.flash&&radioplayer.emp.player.flash.blocked||(radioplayer.emp.player.flash.available=swfobject.hasFlashPlayerVersion(radioplayer.emp.player.flash.flashVersion));this.determinePlayer(d);e.push(d?d[0]:a[radioplayer.emp.audioArrayInteger]);"undefined"!=typeof e&&e.length?(radioplayer.utils.output(typeof e),radioplayer.utils.output(e.length),radioplayer.utils.output(e[0])):
$(this).trigger(this.event.error,{});this.solution("setAudioParams",e,b,c);"flash"===radioplayer.emp.currentPlayer&&this.player.flash.createObject()},determinePlayer:function(a){this.preferredPlayer=preferredPlaybackMethod||"flash";"html"===this.preferredPlayer&&1>radioplayer.emp.audioPreference||"flash"===this.preferredPlayer&&0<radioplayer.emp.audioPreference||a?(radioplayer.emp.currentPlayer="html",this.DEBUG&&radioplayer.utils.output("[EMP]: Trying HTML player"),this.player.html&&this.player.html.initialisedOnce||
this.initHTMLPlayer(),this.player.html.available||(this.DEBUG&&radioplayer.utils.output("[EMP]: We have tried the HTML player, and failed"),0<radioplayer.emp.audioPreference?(radioplayer.emp.currentPlayer=null,this.triggerNoSupportedPlayerError()):(radioplayer.emp.audioPreference++,radioplayer.emp.determinePlayer()))):(radioplayer.emp.currentPlayer="flash",this.player.flash&&this.player.flash.blocked||this.initFlashPlayer(),this.player.flash.available||(this.DEBUG&&radioplayer.utils.output("[EMP]: We have tried the flash player, and failed. "+
radioplayer.emp.audioPreference),0<radioplayer.emp.audioPreference?(radioplayer.emp.currentPlayer=null,this.triggerNoSupportedPlayerError()):(radioplayer.emp.audioPreference++,radioplayer.emp.determinePlayer())))},initFlashPlayer:function(){this.player.flash.init(this);this.player.flash.available&&(this.player.flash.used=!0)},initHTMLPlayer:function(){this.player.html.init(this);this.player.html.available&&(this.player.html.used=!0)},triggerNoSupportedPlayerError:function(){$(this).trigger(this.event.noSupport,
{})},dataReady:function(){this.solution("dataReady")},eventInspector:function(){var a=this;$.each(this.event,function(b,c){$(a).bind(c,function(a,b){})})},setParams:function(a,b,c,d,e,f){this.init();this.solution("setParams",a,b,c,d,e,f);"flash"===radioplayer.emp.currentPlayer&&this.player.flash.createObject()},resetAttemptCount:function(){this.solution("resetAttemptCount")},solution:function(a){var b=Array.prototype.slice.call(arguments,1),c;"flash"===radioplayer.emp.currentPlayer?c=this.player.flash:
"html"===radioplayer.emp.currentPlayer?c=this.player.html:$(this).trigger(this.event.noSupport,{});if(c&&"function"===typeof c[a])return c[a].apply(c,b)},loadRTMPStream:function(a,b){this.solution("loadRTMPStream",a,b)},loadHTTPStream:function(a){this.solution("loadHTTPStream",a)},loadHTTPMP4M4AStream:function(a){this.solution("loadHTTPMP4M4AStream",a)},loadPlaylist:function(a){this.solution("loadPlaylist",a)},resume:function(){this.ready&&(this.errorCount=0,this.solution("resume"))},pause:function(){this.solution("pause")},
stop:function(){this.solution("stop")},cleanup:function(){this.solution("cleanup")},getPosition:function(){return this.solution("getPosition")},getDuration:function(){return this.solution("getDuration")},seek:function(a){this.solution("seek",a)},setVolume:function(a){this.solution("setVolume",a)},setBufferTime:function(a){this.solution("setBufferTime",a)},setPlaybackMode:function(a){this.solution("setPlaybackMode",a)},getPlaybackMode:function(){return this.solution("getPlaybackMode")},getVersion:function(){return this.solution("getVersion")},
memoryreset:function(){return this.solution("memoryreset")},setMemoryLimit:function(a){this.solution("setMemoryLimit",a)},setStallTimeout:function(a){this.solution("setStallTimeout",a)}};
radioplayer.emp.player.flash={ready:!1,waitingForReady:!1,swfname:null,api:null,$api:null,available:!1,used:!1,audioType:"http",audioUrl:"",audioServer:"",audioEndpoint:"",audioLive:!0,ioErrorCount:0,ioErrorTimeout:null,flashVersion:"10.0.0",audioFlash:[],init:function(a){this.api=a;this.$api=$(a)},createObject:function(a,b){var c=radioplayer.consts.flashToUseAssetBaseUrl?radioplayer.consts.assetBaseUrl:"",d=this;null==a&&(a="EMP3.2.1.swf");this.swfname=a.split(".swf")[0];var e={id:this.swfname,name:this.swfname};
null==b&&(b="0");swfobject.embedSWF(c+"flash/"+a,this.api.id,b,b,this.flashVersion,null,{},{menu:"false",scale:"noScale",allowFullscreen:"false",allowScriptAccess:"always",bgcolor:"0x000000"},e,function(a){0==a.success&&d.$api.trigger(d.api.event.noSupport,d.getEventObject())})},dataReady:function(){this.api.DEBUG&&radioplayer.utils.output("flash: Try to initialize the EMP SWF, if it is ready");this.ready?(this.api.DEBUG&&radioplayer.utils.output("flash: EMP SWF ALREADY READY"),this.passParamsToEMP()):
(this.api.DEBUG&&radioplayer.utils.output("flash: EMP SWF NOT READY"),this.waitingForReady=!0,this.waitingTimeout=setTimeout($.proxy(function(){this.waitingForReady&&(this.waitingForReady=!1,radioplayer.emp.player.ready=!1,radioplayer.emp.player.flash.available=!1,radioplayer.emp.player.flash.used=!1,radioplayer.emp.player.flash.blocked=!0,radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime),radioplayer.emp.dataReady())},this),1500))},empReady:function(){this.api.DEBUG&&radioplayer.utils.output("flash: EMP SWF REPORTS READY");
this.ready=!0;this.api.ready=!0;this.empswf=document.getElementById(this.swfname);this.respondToEmp("empReady");this.waitingForReady&&(this.waitingForReady=!1,clearTimeout(this.waitingTimeout),this.api.DEBUG&&radioplayer.utils.output("flash: EMP SWF is now ready to begin receiving parameters"),this.passParamsToEMP())},setParams:function(a,b,c,d,e,f){this.audioType=a;this.audioUrl=b;this.audioServer=c;this.audioEndpoint=d;this.audioLive=e;this.bufferTime=f},setAudioParams:function(a,b,c){this.audioFlash=
a&&a.length?a:[];this.audioLive=b;this.bufferTime=c},passParamsToEMP:function(){this.api.DEBUG&&this.empswf.emp_setDebugMode(!0);this.api.DEBUG&&radioplayer.utils.output("flash: Passing parameters to EMP SWF object");this.audioFlash[0].hasOwnProperty("cacheKiller")&&(radioplayer.utils.output("Set cache killer to: "+(this.audioFlash[0].cacheKiller?"true":"false")),this.empswf.emp_setUseCacheKiller(this.audioFlash[0].cacheKiller));this.audioFlash.length?this.setAudio(this.audioFlash):"rtmp"===this.audioType?
this.loadRTMPStream(this.audioServer,this.audioEndpoint):"http"===this.audioType?this.loadHTTPStream(this.audioUrl):"httpmp4m4a"===this.audioType||"httpaac"===this.audioType||"aac"===this.audioType?this.loadHTTPMP4M4AStream(this.audioUrl):"playlist"===this.audioType?this.loadPlaylist(this.audioUrl):"hls"===this.audioType?this.loadHLSStream(this.audioUrl):this.$api.trigger(this.api.event.noSupport,this.getEventObject());this.setPlaybackMode(this.audioLive?"live":"od");this.setVolume(radioplayer.controls.currentVolume);
this.empswf.emp_setBufferTime(this.bufferTime)},setAudio:function(a){this.cleanup();this.audioFlash=a&&a.length?a:[];(a=this.audioFlash.length?this.audioFlash[0]:!1)?this.passSetAudio(a):this.$api.trigger(this.api.event.noSupport,this.getEventObject())},passSetAudio:function(a){"rtmp"===a.audioType?this.loadRTMPStream(a.audioServer,a.audioEndpoint):"http"===a.audioType?this.loadHTTPStream(a.audioUrl):"httpmp4m4a"===a.audioType||"httpaac"===this.audioType||"aac"===this.audioType?this.loadHTTPMP4M4AStream(a.audioUrl):
"playlist"===a.audioType?this.loadPlaylist(a.audioUrl):"hls"===a.audioType?this.loadHLSStream(a.audioUrl):this.$api.trigger(this.api.event.noSupport,this.getEventObject())},respondToEmp:function(a){this.empswf.emp_reportResponse(a)},empPlaylistLoaded:function(){this.respondToEmp("radioplayer.emp.empPlaylistLoaded")},testRunnerRun:function(a){this[a]()},testRunnerLoadPlaylist:function(){this.empswf.emp_loadPlaylist("testplaylists/testXSPF.xspf")},loadRTMPStream:function(a,b){this.empswf.emp_loadRTMPStream(a,
b)},loadHTTPStream:function(a){this.empswf.emp_loadHTTPStream(a)},loadHTTPMP4M4AStream:function(a){this.empswf.emp_loadHTTPMP4M4AStream(a)},loadPlaylist:function(a){this.empswf.emp_loadPlaylist(a)},loadHLSStream:function(a){this.empswf.emp_loadHLSStream(a)},resume:function(){this.empswf.emp_resume()},pause:function(){this.empswf.emp_pause()},stop:function(){this.empswf.emp_stop()},cleanup:function(){this.empswf.emp_cleanup()},getPosition:function(){return this.empswf.emp_getPosition()},getDuration:function(){return this.empswf.emp_getDuration()},
seek:function(a){this.empswf.emp_seek(a)},setVolume:function(a){this.empswf.emp_setVolume(a)},setBufferTime:function(a){this.empswf.emp_setBufferTime(a)},setPlaybackMode:function(a){this.audioLive="live"==a;this.empswf.emp_setPlaybackMode(a)},getPlaybackMode:function(){return this.audioLive?"live":"od"},getVersion:function(){return this.empswf.emp_getVersion()},memoryreset:function(){return this.empswf.emp_memoryreset()},setMemoryLimit:function(a){this.empswf.emp_setMemoryLimit(a)},setStallTimeout:function(a){this.empswf.emp_setStallTimeout(a)},
reportEMPOutput:function(a){a=$.parseJSON(a);this.$api.trigger(a.type,a)},reportEMPError:function(a){a=$.parseJSON(a);102===a.code?this.$api.trigger(this.api.event.securityError,a):this.$api.trigger(this.api.event.error,a)},resetAttemptCount:function(){},getEventObject:function(){return{mode:this.audioLive?"live":"od"}}};
radioplayer.emp.player.html={version:"1.0 of the HTML5 Audio player for EMP V3",ready:!1,available:!1,used:!1,supported:!1,monitoring:!1,disconnected:!0,firstConnection:!0,ignoringCommands:/(iphone|ipad|ipod|android|blackberry|playbook|windows phone)/i.test(navigator.userAgent),seekTimeoutId:null,stallTime:5E3,stallTimeoutId:null,errorTimeoutId:null,errorCount:0,waitingCount:0,api:null,$api:null,autoplay:!0,aborted:!1,duration:0,audioType:"http",audioUrl:"",audioServer:"",audioEndpoint:"",audioLive:!0,
initialisedOnce:!1,audioHTML:[],audioHTMLFallback:null,formats:{mp3:["audio/mpeg"],mp4:["audio/mp4","audio/x-m4a"],aac:["audio/aac","audio/x-aac"],hls:["application/vnd.apple.mpegurl","application/x-mpegURL","application/vnd.apple.mpegURL","audio/mpegurl"],m3u:["audio/mpegurl","audio/x-mpegurl"],pls:["audio/x-scpls"]},canPlay:{},audioElem:null,$audio:null,init:function(a){var b=this;this.api=a;this.$api=$(a);this.audioElem=document.createElement("audio");this.$audio=$(this.audioElem);this.available=
!!this.audioElem.canPlayType;this.initialisedOnce=!0;this.available&&($.each(this.formats,function(a,d){$.each(d,function(c,d){b.canPlay[a]=b.available&&b.audioElem.canPlayType(d);if(b.canPlay[a])return!1})}),this.audioElem.preload="none",this.attachEvents(),radioplayer.emp.player.html.firstConnection=!0,$("#"+this.api.id).append(this.audioElem),this.ready=!0,this.api.ready=!0,Modernizr.on("videoautoplay",function(a){a||(radioplayer.controls.showPressPlayPrompt(),radioplayer.controls.userPaused=!0)}))},
setAudioParams:function(a,b,c){this.audioHTML=a&&a.length?$.extend(!0,[],a):[];this.audioHTML.length&&this.audioHTML[0].audioType&&"httpmp4m4a"===this.audioHTML[0].audioType&&-1<this.audioHTML[0].audioUrl.indexOf("?type\x3d.flv")&&(this.audioHTML[0].audioUrl=this.audioHTML[0].audioUrl.replace(/\?type=\.flv$|type=\.flv&/,""));this.aborted=!1;this.audioLive=b;this.bufferTime=c},dataReady:function(){this.api.DEBUG&&radioplayer.utils.output("html: dataReady()");this.passParamsToHTML()},passParamsToHTML:function(){this.api.DEBUG&&
radioplayer.utils.output("Passing parameters to HTML audio");this.audioHTML.length?this.setAudio(this.audioHTML):"rtmp"===this.audioType?this.loadRTMPStream(this.audioServer,this.audioEndpoint):"http"===this.audioType?this.loadHTTPStream(this.audioUrl):"aac"===this.audioType?this.loadAACStream(this.audioUrl):"httpmp4m4a"===this.audioType?this.loadHTTPMP4M4AStream(this.audioUrl):"hls"===this.audioType?this.loadHLSStream(this.audioUrl):"playlist"===this.audioType?this.loadPlaylist(this.audioUrl):this.noSupport();
this.setPlaybackMode(this.audioLive?"live":"od");this.setVolume(radioplayer.controls.currentVolume);this.$api.trigger(this.api.event.volumeSet,this.getEventObject())},setAudio:function(a){var b=this,c;this.reset();this.audioHTML=a&&a.length?a:[];$.each(this.audioHTML,function(a,e){if(b.canPlayAudio(e))return c=e,!1});(a=c)?this.passSetAudio(a):this.noSupport()},canPlayAudio:function(a){if("rtmp"===a.audioType)return!1;if("http"===a.audioType)return this.canPlay.mp3;if("aac"===a.audioType)return this.canPlay.aac;
if("httpmp4m4a"===a.audioType)return this.canPlay.mp4;if("hls"===a.audioType)return this.canPlay.hls;if("playlist"===a.audioType)return(a=this.detectPlaylistType(a.audioUrl))&&this.canPlay[a]},passSetAudio:function(a){"rtmp"===a.audioType?this.loadRTMPStream(a.audioServer,a.audioEndpoint):"http"===a.audioType?this.loadHTTPStream(a.audioUrl):"aac"===a.audioType?this.loadAACStream(a.audioUrl):"httpmp4m4a"===a.audioType?this.loadHTTPMP4M4AStream(a.audioUrl):"hls"===a.audioType?this.loadHLSStream(a.audioUrl):
"playlist"===a.audioType&&this.loadPlaylist(a.audioUrl)},setAudioUrl:function(a){this.reset();this.firstConnection=this.supported=!0;this.audioUrl=a;this.autoplay&&this.resume()},reset:function(){clearTimeout(this.stallTimeoutId);clearTimeout(this.errorTimeoutId);this.disconnected||this.disconnectStream();this.supported=this.monitoring=!1;this.duration=0},connectStream:function(){this.supported&&(this.firstConnection&&(this.firstConnection=!1,this.$api.trigger(this.api.event.stopped,{}),this.$api.trigger(this.api.event.cleanedup,
{})),this.disconnected=!1,this.audioElem.src=this.audioUrl,this.audioElem.load())},disconnectStream:function(){this.disconnected=!0;this.audioElem.src="about:blank";this.audioElem.load()},refreshConnection:function(){this.api.DEBUG&&radioplayer.utils.output("html: refreshConnection()");clearTimeout(this.stallTimeoutId);clearTimeout(this.errorTimeoutId);this.supported&&!this.disconnected&&(this.disconnectStream(),this.connectStream(),this.resume())},noSupport:function(){this.supported=!1;this.$api.trigger(this.api.event.noSupport,
this.getEventObject())},detectPlaylistType:function(a){a=a&&a.split&&a.split(".");if(a=1<a.length?a[a.length-1]:""){if("m3u8"===a||"hls"===a)return"hls";if("m3u"===a)return"m3u";if("pls"===a)return"pls"}else return!1},loadRTMPStream:function(a,b){this.noSupport()},loadHTTPStream:function(a){this.canPlay.mp3?this.setAudioUrl(a):this.noSupport()},loadAACStream:function(a){this.canPlay.aac?this.setAudioUrl(a):this.noSupport()},loadHTTPMP4M4AStream:function(a){this.canPlay.mp4?this.setAudioUrl(a):this.noSupport()},
loadHLSStream:function(a){this.canPlay.hls?this.setAudioUrl(a):this.noSupport()},loadPlaylist:function(a){var b=this.detectPlaylistType(a);b&&this.canPlay[b]?this.setAudioUrl(a):this.noSupport()},pause:function(){clearTimeout(this.stallTimeoutId);clearTimeout(this.errorTimeoutId);this.audioElem.pause()},stop:function(){clearTimeout(this.stallTimeoutId);clearTimeout(this.errorTimeoutId);this.audioElem.pause()},resume:function(){clearTimeout(this.stallTimeoutId);clearTimeout(this.errorTimeoutId);this.disconnected&&
this.connectStream();this.supported?this.audioElem.play():this.noSupport()},cleanup:function(){this.reset();this.$api.trigger(this.api.event.cleanedup,this.getEventObject())},getPosition:function(){return 1E3*this.audioElem.currentTime},getDuration:function(){var a=this.audioElem;return 1E3*(isFinite(a.duration)?a.duration:0)},seek:function(a){var b=this,c=this.audioElem;clearTimeout(this.stallTimeoutId);clearTimeout(this.errorTimeoutId);if(!this.audioLive&&!this.disconnected)if(this.supported){this.ignoringCommands&&
c.play();try{if(!c.seekable||"object"===typeof c.seekable&&0<c.seekable.length)c.currentTime=a,c.play();else throw 1;}catch(d){this.seekTimeoutId=setTimeout(function(){b.seek(a)},250)}}else this.noSupport()},setVolume:function(a){this.audioElem.volume=a/100;this.$api.trigger(this.api.event.volumeSet,this.getEventObject())},setBufferTime:function(a){return!1},setPlaybackMode:function(a){this.audioLive="live"==a;this.$api.trigger(this.api.event.mode,this.getEventObject())},getPlaybackMode:function(){return this.audioLive?
"live":"od"},getVersion:function(){return this.version},memoryreset:function(){return!1},setMemoryLimit:function(a){return!1},setStallTimeout:function(a){"number"===typeof a&&(this.stallTime=2E3>a?2E3:a)},attachEvents:function(){var a=this;this.audioElem.addEventListener("progress",function(){a.audioLive||a.$api.trigger(a.api.event.loadProgress,a.getEventObject())},!1);this.audioElem.addEventListener("timeupdate",function(){var b=a.getDuration();a.duration!==b&&(a.duration=b,a.$api.trigger(a.api.event.durationSet,
a.getEventObject()));a.audioLive||a.$api.trigger(a.api.event.update,a.getEventObject())},!1);this.audioElem.addEventListener("play",function(){clearTimeout(a.stallTimeoutId);clearTimeout(a.errorTimeoutId);a.ignoringCommands=!1;a.audioLive&&(a.monitoring=!0);a.$api.trigger(a.api.event.resumed,a.getEventObject())},!1);this.audioElem.addEventListener("playing",function(){radioplayer.controls.noSupportShowing=!1;radioplayer.controls.hideErrorMsg();!radioplayer.objs.body.hasClass("showing-overlay")&&audioLive&&
radioplayer.playing.startUpdating();clearTimeout(a.stallTimeoutId);a.$api.trigger(a.api.event.startPlaying,a.getEventObject());radioplayer.emp.player.html.errorCount=0;radioplayer.emp.player.html.waitingCount=0},!1);this.audioElem.addEventListener("waiting",function(){radioplayer.emp.player.html.waitingCount++;a.audioLive&&a.monitoring&&(clearTimeout(a.stallTimeoutId),radioplayer.emp.player.html.waitingCount<radioplayer.emp.retryCount?a.stallTimeoutId=setTimeout(function(){a.refreshConnection()},
a.stallTime):(clearTimeout(a.stallTimeoutId),radioplayer.emp.player.html.errorCount=0,radioplayer.emp.player.html.waitingCount=0,radioplayer.emp.player.html.cleanup(),a.aborted=!0,radioplayer.emp.player.html.noSupport()))},!1);this.audioElem.addEventListener("pause",function(){clearTimeout(a.stallTimeoutId);clearTimeout(a.errorTimeoutId);a.audioLive?(a.monitoring=!1,this.disconnected||a.disconnectStream(),a.$api.trigger(a.api.event.stopped,a.getEventObject())):a.$api.trigger(a.api.event.pausePlaying,
a.getEventObject())},!1);this.audioElem.addEventListener("ended",function(){a.$api.trigger(a.api.event.ended,a.getEventObject())},!1);this.audioElem.addEventListener("volumechange",function(){a.$api.trigger(a.api.event.volumeSet,a.getEventObject())},!1);this.audioElem.addEventListener("durationchange",function(){a.duration=a.getDuration();a.$api.trigger(a.api.event.durationSet,a.getEventObject())},!1);this.audioElem.addEventListener("error",function(){radioplayer.emp.player.html.errorCount++;if(a.audioElem.error.message&&
-1<a.audioElem.error.message.indexOf("DEMUXER_ERROR_COULD_NOT_OPEN"))return!1;a.aborted||(clearTimeout(a.stallTimeoutId),clearTimeout(a.errorTimeoutId),radioplayer.emp.player.html.errorCount<radioplayer.emp.retryCount?a.errorTimeoutId=setTimeout(function(){a.refreshConnection()},a.stallTime/2):(radioplayer.emp.player.html.errorCount=0,radioplayer.emp.player.html.waitingCount=0,radioplayer.emp.player.html.cleanup(),a.aborted=!0,radioplayer.emp.player.html.noSupport()))},!1)},resetAttemptCount:function(){return!1},
getEventObject:function(){var a=this.audioElem,b=a.seekable&&a.seekable.length?1:0;return{position:this.getPosition(),duration:this.getDuration(),volume:Math.round(100*a.volume),mode:this.audioLive?"live":"od",loadProgress:b,bytesLoaded:100*b,bytesTotal:100}}};
radioplayer.overlay={inactivityTimer:null,inactivityCount:45E3,scrollSettleTimer:null,openedOnce:!1,inViewThreshold:100,detectScrolling:!0,tabShowingName:"",azDivideHeight:0,requestFailTimer:null,requestFailed:!1,currentDivideLetter:null,init:function(){radioplayer.objs.overlayContainer=$(".overlay-container");$(".radioplayer").on("click",".menu-btn",function(a){a.preventDefault();if(radioplayer.services.alerts.cookies.showing)return!1;radioplayer.objs.overlayContainer.is(":visible")?(radioplayer.overlay.hide(),
radioplayer.services.analytics.sendEvent("Navigation","Main Menu","Close Menu Button",null,null)):(radioplayer.services.analytics.sendEvent("Navigation","Main Menu","Menu button",null,null),radioplayer.overlay.show(radioplayer.lang.general.close_menu),radioplayer.objs.body.addClass("showing-menu"),radioplayer.overlay.openedOnce?($prevSelTab=$(".menu-container .tabs li.on"),$prevSelTab.removeClass("on"),radioplayer.overlay.selectTab($prevSelTab)):(radioplayer.overlay.openedOnce=!0,0<radioplayer.settings.presets.length?
radioplayer.overlay.selectTab($(".menu-container .tabs li:eq(0)")):radioplayer.overlay.selectTab($(".menu-container .tabs li:eq(3)"))))}).on("click",".tabs li a",function(a){a.preventDefault();radioplayer.overlay.selectTab($(this).parent())}).on("click","#station-logo-link",function(a){if(radioplayer.objs.body.hasClass("showing-overlay"))return a.preventDefault(),radioplayer.overlay.hide(),!1});radioplayer.objs.body.on("keyup",function(a){27==a.which&&radioplayer.objs.body.hasClass("showing-overlay")&&
radioplayer.overlay.hide()});radioplayer.objs.overlayContainer.on("click",".menu-container .alphabet li a",function(a){a.preventDefault();var b=$(this);a=b.parent();tabIndex=$(".menu-container .alphabet li").index(a);letter=b.html();radioplayer.utils.output("clicked letter "+letter);letter=$(this).parent("li").parent("ul").hasClass("alphabet--minimised")?"0"===letter[0]?"#":letter[0].toLowerCase():letter.toLowerCase();b="#"===letter?"num":letter;radioplayer.overlay.detectScrolling=!1;$("#azlist-container").scrollTo("#letter-divide-"+
b,{axis:"y",duration:500,onAfter:function(){radioplayer.overlay.detectScrolling=!0;radioplayer.overlay.lazyLoad($("#azlist-container"));$("#azlist-container").data("scrollpos",$("#azlist-container").scrollTop())}});a.hasClass("on")||($(".menu-container .alphabet li").removeClass("on"),a.addClass("on"),radioplayer.services.saveCookie("stationlistprefix/s","stationlistprefix",letter))}).on("click",".toggle-mystations button:not(.animating)",function(a){a.preventDefault();a=$(this).parent();var b=a.parents(".overlay-item"),
c=b.data("stationid"),d=b.parent().attr("id");b.hasClass("in-mystations")?radioplayer.mystations.remove(c,d,a):radioplayer.mystations.add(c,d,a)}).on("click",".more-toggle",function(a){a.preventDefault();var b=$(this).parent().parent();if(b.hasClass("expanded"))b.removeClass("expanded").prev().removeClass("prevExpanded"),b.children(".overlay-item-extra-cont").slideUp(250),$(this).attr("title",radioplayer.lang.search.show_information).html("\x3cspan\x3e"+radioplayer.lang.search.show_information+"\x3c/span\x3e"),
$.browser.msie&&7==$.browser.version&&b.next().hide().show();else{radioplayer.overlay.collapseResult();b.addClass("expanded").prev().addClass("prevExpanded");var c=b.is(":last-child");b.children(".overlay-item-extra-cont").slideDown(250,function(){c&&b.parent().scrollTo("100%",{axis:"y",duration:200})});$(this).attr("title",radioplayer.lang.search.hide_information).html("\x3cspan\x3e"+radioplayer.lang.search.hide_information+"\x3c/span\x3e")}}).on("click",".overlay-item-link",function(a){a.preventDefault();
a=$(this).parents(".overlay-item").data("section");var b="",c=$(this).parents(".overlay-item").data("stationid"),d=$(this).attr("href");"recommend"==a?b="Recommended":"history"==a?b="Recent Menu":"az"==a?(b="A-Z Menu",d+=(0<d.indexOf("?")?"\x26":"?")+"stationletterprefix\x3d"+$(this).data("letter")):"search"==a?b="search":"mystations"==a&&(b="Favourites");radioplayer.overlay.sidewaysNavigate(b,c,d)});$(".menu-container .tabs ul li").eq(0).find("a span").html(radioplayer.lang.menu_tabs.tab_1_text);
$(".menu-container .tabs ul li").eq(1).find("a span").html(radioplayer.lang.menu_tabs.tab_2_text);$(".menu-container .tabs ul li").eq(2).find("a span").html(radioplayer.lang.menu_tabs.tab_3_text);$(".menu-container .tabs ul li").eq(3).find("a span").html(radioplayer.lang.menu_tabs.tab_4_text);radioplayer.overlay.resizeMenuTabs()},resizeMenuTabs:function(){if(!radioplayer.consts.reduced_func){var a=$(".menu-container .tabs ul li").length;if(a){for(var b=radioplayer.utils.getViewportWidth(),c=radioplayer.lang.menu_tabs.sizing.length,
d=!1,e=0;e<c;e++)if(b<=radioplayer.lang.menu_tabs.sizing[e].maxViewport){d=!0;for(c=b=0;c<a;c++){var f;"manual"===radioplayer.lang.menu_tabs.sizing[e].mode?(c===a-1?f=100-b:(f=Math.floor(radioplayer.lang.menu_tabs.sizing[e].tabSizes[c]/radioplayer.lang.menu_tabs.sizing[e].maxViewport*100),b=Math.floor(b+f)),f+="%"):f="25%";$(".menu-container .tabs ul li").eq(c).css("width",f)}break}if(d)return!1;for(c=0;c<a;c++)$(".menu-container .tabs ul li").eq(c).css("width","25%")}}},sidewaysNavigate:function(a,
b,c){"search"==a?radioplayer.services.analytics.sendEvent("Search","Full Search",b.toString(),null,null):radioplayer.services.analytics.sendEvent("Navigation",a,b.toString(),null,null);setTimeout(function(){window.location.href=c},100)},show:function(a){var b=!1;radioplayer.mystations.menuBtnNotificationTimeout&&(clearTimeout(radioplayer.mystations.menuBtnNotificationTimeout),$(".menu-btn-notification").removeClass("menu-btn-notification--active"));radioplayer.mystations.menuBtnNotificationTimeoutSub&&
clearTimeout(radioplayer.mystations.menuBtnNotificationTimeoutSub);radioplayer.objs.body.hasClass("showing-overlay")&&(b=!0,radioplayer.objs.body.removeClass("showing-menu showing-search showing-suggest"),radioplayer.overlay.hidingTab());radioplayer.objs.body.addClass("showing-overlay");$(".radioplayer-globalnav .menu-btn").attr("title",a).find(".menu-btn-accessible").html(a);$(".radioplayer-globalnav .menu-btn-icon").addClass("icon-chevron-left");$("#station-logo-link").attr("title",a);clearTimeout(radioplayer.inactivityTimer);
radioplayer.inactivityTimer=setTimeout(radioplayer.overlay.hide,radioplayer.overlay.inactivityCount);radioplayer.playing.stopUpdating();b||(radioplayer.objs.overlayContainer.on("click.activity",function(){radioplayer.overlay.resetInactivity()}),radioplayer.objs.overlayContainer.find(".scrollable-wrapper").on("scroll.scroll-overlays",function(){if(radioplayer.overlay.detectScrolling){var a=$(this);a.data("scrollpos",a.scrollTop());clearTimeout(radioplayer.overlay.scrollSettleTimer);radioplayer.overlay.scrollSettleTimer=
setTimeout(function(){radioplayer.overlay.lazyLoad(a);radioplayer.overlay.resetInactivity();radioplayer.overlay.currentDivideLetter&&radioplayer.services.saveCookie("stationlistprefix/s","stationlistprefix",radioplayer.overlay.currentDivideLetter)},250)}}))},hide:function(){radioplayer.objs.overlayContainer.off("click.activity");radioplayer.objs.overlayContainer.find(".scrollable-wrapper").off("scroll.scroll-overlays");$.browser.msie&&7==$.browser.version&&radioplayer.objs.body.hasClass("showing-search")&&
radioplayer.objs.searchContainer.find(".tab-container").html("").removeClass("loaded has-error");radioplayer.objs.body.removeClass("showing-menu showing-search showing-suggest showing-overlay");$(".radioplayer-globalnav .menu-btn").attr("title",radioplayer.lang.general.open_menu).find(".menu-btn-accessible").html(radioplayer.lang.general.open_menu);$(".radioplayer-globalnav .menu-btn-icon").removeClass("icon-chevron-left");$("#station-logo-link").removeAttr("title");clearTimeout(radioplayer.inactivityTimer);
radioplayer.playing.startUpdating();$("#search-clear").is(":visible")&&($("#search-clear").hide(),$("#search-button").show());radioplayer.overlay.hidingTab();$.browser.msie&&7==$.browser.version&&$(".radioplayer-body").hide().show()},resetInactivity:function(){clearTimeout(radioplayer.inactivityTimer);radioplayer.inactivityTimer=setTimeout(radioplayer.overlay.hide,radioplayer.overlay.inactivityCount)},lazyLoad:function(a){var b=a.scrollTop(),c=a.height(),d=a.scrollTop()+c+this.inViewThreshold,e=[];
a.find(".overlay-item.not-loaded-img").each(function(a,c){$overlayItem=$(this);a=b+$overlayItem.position().top;c=b+$overlayItem.position().top+$overlayItem.outerHeight();if(a<d&&a>=b||c>b&&c<d)$overlayItem.removeClass("not-loaded-img"),a=$overlayItem.find(".overlay-item-img img"),a.data("src")&&a.attr("src",a.data("src")).removeAttr("data-src"),$overlayItem.hasClass("not-loaded-meta")&&!$overlayItem.hasClass("checking-for-meta")&&(e.push($overlayItem.attr("data-stationid")),$overlayItem.removeClass("not-loaded-meta").addClass("checking-for-meta"))});
0<e.length&&(a=e.join(","),radioplayer.services.getAPI(radioplayer.consts.api.onAir+"?rpIds\x3d"+a+"\x26descriptionSize\x3d70\x26callback\x3dradioplayer.overlay.receiveStnNowInfo"))},selectTab:function(a){var b=a.data("content"),c=a.parent(),d=c.children().index(a),e=c.parent(),f=e.next().children(".tab-container");a.hasClass("on")||(c.children("li").removeClass("on no-divide"),a.addClass("on").next().addClass("no-divide"),f.removeClass("showing"),c=f.eq(d),c.addClass("showing"),e.css("border-bottom-color",
a.data("color")),this.hideMenuSpinner(),""!=radioplayer.overlay.tabShowingName&&this.hidingTab(),this.showingTab(b,c))},showingTab:function(a,b){this.tabShowingName=a;"azlist"==a?(radioplayer.services.analytics.sendEvent("Navigation","Main Menu","A - Z List",null,null),b.hasClass("loaded")?$.browser.msie&&$("#azlist-container").scrollTop($("#azlist-container").data("scrollpos")):(b.addClass("loaded"),radioplayer.overlay.requestAZList())):"mystations"==a?(radioplayer.services.analytics.sendEvent("Navigation",
"Main Menu","My Stations",null,null),b.hasClass("loaded")||(b.addClass("loaded"),radioplayer.mystations.populateList(radioplayer.settings.presets,"mystations"))):"history"==a?(radioplayer.services.analytics.sendEvent("Navigation","Main Menu","Recent",null,null),b.hasClass("loaded")||(b.addClass("loaded"),radioplayer.mystations.populateList(radioplayer.settings.history,"history"))):"recommended"==a?(b.removeClass("has-error"),radioplayer.overlay.requestRecommend(),radioplayer.services.analytics.sendEvent("Navigation",
"Main Menu","Recommended",null,null)):"searchlive"!=a||b.hasClass("loaded")?"searchod"!=a||b.hasClass("loaded")||(b.addClass("loaded"),radioplayer.search.tabRequest("od")):(b.addClass("loaded"),radioplayer.search.tabRequest("live"))},hidingTab:function(){"mystations"==radioplayer.overlay.tabShowingName&&radioplayer.mystations.purgeRemovedMyStations();radioplayer.overlay.tabShowingName=""},showMenuSpinner:function(){$(".menu-container .tabs-wrapper .spinner").show()},hideMenuSpinner:function(){$(".menu-container .tabs-wrapper .spinner").hide()},
requestAZList:function(){this.showMenuSpinner();this.requestFailed=!1;this.requestFailTimer=setTimeout(function(){radioplayer.overlay.showFailMsg("azlist")},15E3);radioplayer.services.getAPI(radioplayer.consts.api.az+"/?callback\x3dradioplayer.overlay.receiveAZList")},highlightMinimisedAlphabetTab:function(a){if("num"===a)$("#letter-min-"+a).addClass("on");else for(var b=radioplayer.lang.azlist.alphabet_minimised_array,c=b.length,d=0;d<c;d++)if(-1<$.inArray(a,b[d].letters)){$("#letter-min-"+b[d].displayText[0]).addClass("on");
break}},receiveAZList:function(a){clearTimeout(this.requestFailTimer);if(!this.requestFailed){var b=radioplayer.lang.azlist.alphabet_array,c=radioplayer.lang.azlist.alphabet_minimised_array,d='\x3ch2 class\x3d"access"\x3e'+radioplayer.lang.menu_tabs.tab_4_text+"\x3c/h2\x3e",e=[];$.each(b,function(b,c){b=c.toUpperCase();a.stations[c]?(d+='\x3cdiv class\x3d"letter-divide" data-letter\x3d"'+b+'" id\x3d"letter-divide-'+("#"==c?"num":c)+'"\x3e'+b+"\x3c/div\x3e",e.push(c),d+=radioplayer.overlay.iterateResults(a.stations[c],
"az",c)):d+='\x3cdiv class\x3d"letter-divide" data-letter\x3d"'+b+'" id\x3d"letter-divide-'+("#"==c?"num":c)+'"\x3e'+b+'\x3c/div\x3e\x3cdiv class\x3d"no-stations-item"\x3e'+radioplayer.lang.azlist.no_stations+"\x3c/div\x3e"});var f="",g="",k=!1,l="";$.each(b,function(a,b){l=(k=-1<e.indexOf(b))?radioplayer.lang.azlist.view_stations_beginning:radioplayer.lang.azlist.no_stations_beginning;l=l.replace("{letter}","#"==b?radioplayer.lang.azlist.a_number:b.toUpperCase());f+='\x3cli id\x3d"letter-'+("#"==
b?"num":b)+'" class\x3d"'+(k?"":"no-stations")+'"\x3e\x3ca href\x3d"#" title\x3d"'+l+'"\x3e'+b.toUpperCase()+"\x3c/a\x3e\x3c/li\x3e"});$.each(c,function(a,b){l=radioplayer.lang.azlist.view_stations_from;l+=b.displayText.replace("-"," to ");g+='\x3cli id\x3d"letter-min-'+("0"===b.displayText[0]?"num":b.displayText[0])+'"\x3e\x3ca href\x3d"#" title\x3d"'+l+'"\x3e'+b.displayText.toUpperCase()+"\x3c/a\x3e\x3c/li\x3e"});this.hideMenuSpinner();$(".alphabet ul.alphabet--regular").html(f);$(".alphabet ul.alphabet--minimised").html(g);
$("#azlist-container").html(d);$.browser.msie&&7==$.browser.version?$(".sticky-divide").remove():(radioplayer.objs.stickyLetterDivide=$(".sticky-divide"),radioplayer.objs.stickyLetterDivide.css({display:"block",width:$("#letter-divide-num").width()+"px"}),$(window).on("resize",function(){radioplayer.objs.stickyLetterDivide.css({width:$("#letter-divide-num").width()+"px"})}),this.azDivideHeight=radioplayer.objs.stickyLetterDivide.outerHeight(),$("#azlist-container").on("scroll.update-sticky-divide",
function(){radioplayer.overlay.updateStickyDivide($(this))}));b=!1;if(""!=radioplayer.settings.stationlistprefix)var h="#"===radioplayer.settings.stationlistprefix?"num":radioplayer.settings.stationlistprefix;else var b=!0,m=currentStationName.substr(0,1).toLowerCase(),h="#"===m?"num":m;radioplayer.utils.output("we have the letter "+h);radioplayer.overlay.currentDivideLetter=h;this.detectScrolling=!1;setTimeout(function(){$("#azlist-container").scrollTo("#letter-divide-"+h,{axis:"y",duration:10,onAfter:function(){radioplayer.utils.output("completed initial scroll");
radioplayer.overlay.detectScrolling=!0}})},100);$("#letter-"+h).addClass("on");radioplayer.overlay.highlightMinimisedAlphabetTab(h);b&&radioplayer.services.saveCookie("stationlistprefix/s","stationlistprefix",m)}},updateStickyDivide:function(a){var b=a.scrollTop(),c=!1,d="";a.find(".letter-divide").each(function(a,f){$divideItem=$(this);a=b+$divideItem.position().top;$divideItem.position();$divideItem.outerHeight();a<=b?d=$divideItem.data("letter"):c||(c=!0,a<b+radioplayer.overlay.azDivideHeight?
(a=$divideItem.position().top,radioplayer.objs.stickyLetterDivide.css("top","-"+(radioplayer.overlay.azDivideHeight-a)+"px")):radioplayer.objs.stickyLetterDivide.css("top","0"))});radioplayer.overlay.currentDivideLetter=d.toLowerCase();radioplayer.objs.stickyLetterDivide.html(d)},requestRecommend:function(){$("#recom-container").html("");this.showMenuSpinner();this.requestFailed=!1;this.requestFailTimer=setTimeout(function(){radioplayer.overlay.showFailMsg("recom")},15E3);var a="?callback\x3dradioplayer.overlay.receiveRecommend\x26locale\x3d"+
radioplayer.lang.recommendations.locale+"\x26lang\x3d"+langCode;0<radioplayer.settings.history.length&&(a+="\x26historyRpIds\x3d"+radioplayer.settings.history.join(","));0<radioplayer.settings.presets.length&&(a+="\x26presetRpIds\x3d"+radioplayer.settings.presets.join(","));""!=radioplayer.settings.guid&&(a+="\x26guid\x3d"+radioplayer.settings.guid);radioplayer.services.getAPI(radioplayer.consts.api.recommend+a)},receiveRecommend:function(a){clearTimeout(this.requestFailTimer);this.requestFailed||
(a='\x3ch2 class\x3d"access"\x3e'+radioplayer.lang.menu_tabs.tab_3_text+"\x3c/h2\x3e"+this.iterateResults(a.recommendations,"recommend"),this.hideMenuSpinner(),$("#recom-container").html(a),this.lazyLoad($("#recom-container")))},showFailMsg:function(a){this.requestFailed=!0;this.hideMenuSpinner();var b='\x3cdiv class\x3d"error-message fail"\x3e'+radioplayer.lang.general.fail_message+"\x3c/div\x3e";$("#"+a+"-container").addClass("has-error").html(b);radioplayer.services.analytics.sendEvent("Errors",
"Failed Message",a,null,null)},iterateResults:function(a,b,c){var d="",e=Math.round(.001*(new Date).getTime());$.each(a,function(a,g){"search"==b&&g.results[2]?(d+='\x3cdiv data-brand\x3d"'+g.groupID+'" class\x3d"station-group collapsed"\x3e',$.each(g.results,function(a,c){c=radioplayer.overlay.oneResult(b,c,a,g.groupID,e);d+=(2==a?'\x3cdiv class\x3d"station-group-hidden"\x3e':"")+c}),d+="\x3c/div\x3e\x3c/div\x3e"):(a="search"==b?radioplayer.overlay.oneResult(b,g.results[1],0,"",e):"az"==b?radioplayer.overlay.oneResult(b,
g,0,"",e,c):radioplayer.overlay.oneResult(b,g,0,"",e),d+=a)});return d},oneResult:function(a,b,c,d,e,f){var g=b.rpId,k=b.imageUrl?b.imageUrl:radioplayer.consts.assetBaseUrl+"img/result-placeholder.png",l=b.serviceName,h="",m="",n="SI",t=b.consoleUrl,p=null,q=!0;if("search"==a)h=radioplayer.overlay.getSubtitle(b),m=b.description,n=b.type,p=radioplayer.overlay.calculateStationStatus(b,e);else if("recommend"==a)h="ONDEMAND"==b.type?b.name:"",m=b.description?b.description:"",n="SERVICE"==b.type?"SI":
"OD",p=radioplayer.overlay.calculateStationStatus(b,e);else if("mystations"==a||"history"==a||"az"==a)p={stationType:radioplayer.lang.search.live,timeToBroadcast:""},q=!1;var r="SI"==n||"PI"==n||"PE_E"==n||"PI_E"==n;e=r?"not-loaded-meta":"";var u="",v="";r&&!radioplayer.consts.reduced_func&&(-1!=$.inArray(b.rpId,radioplayer.settings.presets)?(u="in-mystations",v='\x3cspan class\x3d"toggle-mystations" title\x3d"'+radioplayer.lang.mystations.remove_this+'"\x3e\r\n                            \x3cbutton type\x3d"button" title\x3d"'+
radioplayer.lang.mystations.remove_this+'" class\x3d"heart-container"\x3e\r\n                            \t\t\x3cspan class\x3d"heart-container-ie8"\x3e\x3c/span\x3e\r\n                                \x3cspan class\x3d"accessibility-text"\x3e'+radioplayer.lang.mystations.remove_this+'\x3c/span\x3e\r\n                                \x3cspan class\x3d"icon-heart"\x3e\r\n                                    \x3cspan class\x3d"path1"\x3e\x3c/span\x3e\x3cspan class\x3d"path2"\x3e\x3c/span\x3e\x3cspan class\x3d"path3"\x3e\x3c/span\x3e\x3cspan class\x3d"path4"\x3e\x3c/span\x3e\x3cspan class\x3d"path5"\x3e\x3c/span\x3e\x3cspan class\x3d"path6"\x3e\x3c/span\x3e\x3cspan class\x3d"path7"\x3e\x3c/span\x3e\x3cspan class\x3d"path8"\x3e\x3c/span\x3e\r\n                                \x3c/span\x3e\r\n                            \x3c/button\x3e\r\n                        \x3c/span\x3e'):
v='\x3cspan class\x3d"toggle-mystations" title\x3d"'+radioplayer.lang.mystations.add_this+'"\x3e\r\n                            \x3cbutton type\x3d"button" title\x3d"'+radioplayer.lang.mystations.add_this+'" class\x3d"heart-container"\x3e\r\n                            \t\t\x3cspan class\x3d"heart-container-ie8"\x3e\x3c/span\x3e \r\n                                \x3cspan class\x3d"accessibility-text"\x3e'+radioplayer.lang.mystations.add_this+'\x3c/span\x3e\r\n                                \x3cspan class\x3d"icon-heart"\x3e\r\n                                    \x3cspan class\x3d"path1"\x3e\x3c/span\x3e\x3cspan class\x3d"path2"\x3e\x3c/span\x3e\x3cspan class\x3d"path3"\x3e\x3c/span\x3e\x3cspan class\x3d"path4"\x3e\x3c/span\x3e\x3cspan class\x3d"path5"\x3e\x3c/span\x3e\x3cspan class\x3d"path6"\x3e\x3c/span\x3e\x3cspan class\x3d"path7"\x3e\x3c/span\x3e\x3cspan class\x3d"path8"\x3e\x3c/span\x3e\r\n                                \x3c/span\x3e\r\n                            \x3c/button\x3e\r\n                        \x3c/span\x3e');
r=radioplayer.lang.search.show_more_stations;r=r.replace("{group}",d);if("recommend"==a)var w=b.factors.join(", ");return'\x3cdiv href\x3d"'+t+'"'+("az"==a?' data-letter\x3d"'+f+'"':"")+' data-stationid\x3d"'+g+'" data-type\x3d"'+n+'" data-statustype\x3d"'+p.stationType+'" data-section\x3d"'+a+'" class\x3d"overlay-item '+n+" "+u+" not-loaded-img "+e+'"\x3e\x3cdiv class\x3d"overlay-item-initial '+("recommend"==a?"overlay-item-rec":"")+'"\x3e\x3ca class\x3d"overlay-item-link" href\x3d"'+t+'"'+("az"==
a?' data-letter\x3d"'+f+'"':"")+'\x3e\x3cspan class\x3d"overlay-item-img"\x3e\x3cspan class\x3d"play-icon"\x3e\x3c/span\x3e\x3cimg src\x3d"'+radioplayer.consts.assetBaseUrl+'img/result-placeholder.png" data-src\x3d"'+k+'" width\x3d"86" height\x3d"48" alt\x3d"" /\x3e\x3c/span\x3e\x3cspan class\x3d"title"\x3e'+l+'\x3c/span\x3e\x3c/a\x3e\x3cp class\x3d"'+("OD"==n||"PI_OD"==n?"programme-title":"subtitle")+' truncate"\x3e'+h+'\x3c/p\x3e\x3cp class\x3d"description"\x3e'+m+"\x3c/p\x3e"+(q?'\x3cp class\x3d"broadcast-info"\x3e\x3cspan class\x3d"status"\x3e'+
p.stationType+'\x3c/span\x3e \x3cspan class\x3d"broadcast-time"\x3e'+p.timeToBroadcast+"\x3c/span\x3e "+("recommend"==a?'\x3cspan class\x3d"recommend-factors"\x3e\x3cspan class\x3d"icon-tag"\x3e\x3c/span\x3e'+w+"\x3c/span\x3e":"")+"\x3c/p\x3e":"")+v+"\x3c/div\x3e"+((1==c?'\x3ca href\x3d"#" class\x3d"station-group-toggle" role\x3d"button"\x3e\x3ci\x3e\x3c/i\x3e'+r+"\x3c/a\x3e":"")+"\x3c/div\x3e")},receiveStnNowInfo:function(a){"SUCCESS"==a.responseStatus&&0<a.total&&($.each(a.results,function(a,c){radioplayer.objs.overlayContainer.find(".overlay-item.checking-for-meta[data-stationid\x3d'"+
a+"']").each(function(a,b){$overlayItem=$(b);$overlayItem.removeClass("checking-for-meta");var d=1,e=[],k=[],l,h=[],m=[],n=$overlayItem.attr("data-type"),t=-1<$.inArray($overlayItem.data("section"),["mystations","history","recommend","az"]),p="",q="",r="";h[0]=$(".overlay-item-initial .overlay-item-img img",b).attr("src");m[0]=$(".overlay-item-initial .overlay-item-data .description",b).html();var u=$(".overlay-item-initial .overlay-item-link",b).attr("href");$.each(c,function(a,b){"SI"!=b.type||
"mystations"!=$overlayItem.data("section")&&"history"!=$overlayItem.data("section")||($overlayItem.find(".overlay-item-img img").attr("src",b.imageUrl),$overlayItem.find(".title").html(b.serviceName));if(-1<$.inArray(b.type,["SI","PI","PE_E","PI_E"])){l=radioplayer.overlay.getSubtitle(b);if(b.type!=n){-1!=$.inArray(b.imageUrl,h)?b.imageUrl="":h[d]=b.imageUrl;-1!=$.inArray(b.description,m)?b.description="":m[d]=b.description;if(l||b.description)!b.song||"PE_E"!=b.type&&"PI_E"!=b.type?(e.push('\x3cdiv class\x3d"overlay-item-extra'+
(b.imageUrl?" hasImage":"")+("recommend"!==$overlayItem.data("section")&&0==e.length?" no-top-border":"")+'"\x3e'+(b.imageUrl?'\x3ca class\x3d"overlay-item-link" href\x3d"'+u+'"\x3e\x3cspan class\x3d"overlay-item-img"\x3e\x3cspan class\x3d"play-icon"\x3e\x3c/span\x3e\x3cimg width\x3d"86" height\x3d"48" alt\x3d"" src\x3d"'+b.imageUrl+'"\x3e\x3c/span\x3e\x3c/a\x3e':"")+'\x3cdiv class\x3d"overlay-item-data"\x3e\x3cp class\x3d"subtitle"\x3e'+l+'\x3c/p\x3e\x3cp class\x3d"description"\x3e'+b.description+
"\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e"),k.push(b.type)):(e.push('\x3cdiv class\x3d"overlay-item-song'+("recommend"!==$overlayItem.data("section")&&0==e.length?" no-top-border":"")+'"\x3e\x3ci\x3e\x3c/i\x3e'+l+"\x3c/div\x3e"),k.push("song"));d++}t&&(l||b.description)&&(!b.song||"PE_E"!=b.type&&"PI_E"!=b.type?"PE_E"==b.type||"PI_E"==b.type?"song"!=p&&(p=b.type,q=l,r=b.description):"PI"==b.type?-1==$.inArray(p,["song","PE_E","PI_E"])&&(p=b.type,q=l,r=b.description):"SI"==b.type&&-1==$.inArray(p,["song",
"PE_E","PI_E","PI"])&&(p=b.type,q=l,r=b.description):(p="song",q=l,r=b.description))}});""!=p&&($overlayItem.find(".overlay-item-initial .subtitle").html(q),$overlayItem.find(".overlay-item-initial .description").html(r),"song"==p&&$overlayItem.find(".overlay-item-initial .subtitle").removeClass("truncate"),0<e.length&&(a=$.inArray(p,k),-1<a&&e.splice(a,1)));$overlayItem.addClass("no-meta-available")})}),"az"!=$overlayItem.data("section")||$.browser.msie&&7==$.browser.version||radioplayer.overlay.updateStickyDivide($("#azlist-container")))},
collapseResult:function(){if(1==radioplayer.objs.overlayContainer.find(".overlay-item.expanded").length){var a=radioplayer.objs.overlayContainer.find(".overlay-item.expanded");a.children(".overlay-item-extra-cont").slideUp(250,function(){$(this).hide()});a.find(".more-toggle").attr("title",radioplayer.lang.search.show_information).html("\x3cspan\x3e"+radioplayer.lang.search.show_information+"\x3c/span\x3e");a.removeClass("expanded").prev().removeClass("prevExpanded")}},calculateStationStatus:function(a,
b){var c={},d=null,e=null;a.startTime&&""!=a.startTime&&a.stopTime&&""!=a.stopTime&&(d=a.startTime-b,e=a.stopTime-b);a.startTime&&""!=a.startTime&&0<d?(c.stationType=radioplayer.lang.search.coming_up,c.timeToBroadcast=this.getTimeBeforeBroadcast(d)):a.stopTime&&""!=a.stopTime&&0>e?(c.stationType=radioplayer.lang.search.broadcast,c.timeToBroadcast=this.getTimePastSinceBroadcast(b-a.stopTime)):(c.stationType=a.odStartTime&&""!=a.odStartTime?radioplayer.lang.search.broadcast:radioplayer.lang.search.live,
c.timeToBroadcast="");return c},divideAndRound:function(a,b){timeReturned=a/b;return 1<=timeReturned?a=timeReturned=Math.round(timeReturned):1},getTimeBeforeBroadcast:function(a){a=Math.round(a/60);if(0==a)return" "+radioplayer.lang.search.in_seconds;if(1==a)return" "+radioplayer.lang.search.in_minute;var b=radioplayer.lang.search.in_minutes,b=b.replace("{n}",a);return" "+b},getTimePastSinceBroadcast:function(a){var b;if(604800<=a)if(31556926<=a){if(b=this.divideAndRound(a,31556926))return this.getTimePastString(b,
radioplayer.lang.search.year_ago,radioplayer.lang.search.years_ago)}else if(2629743<=a){if(b=this.divideAndRound(a,2629743))return this.getTimePastString(b,radioplayer.lang.search.month_ago,radioplayer.lang.search.months_ago)}else{if(604800<=a&&(b=this.divideAndRound(a,604800)))return this.getTimePastString(b,radioplayer.lang.search.week_ago,radioplayer.lang.search.weeks_ago)}else if(86400<=a){if(b=this.divideAndRound(a,86400))return this.getTimePastString(b,radioplayer.lang.search.day_ago,radioplayer.lang.search.days_ago)}else if(3600<=
a){if(b=this.divideAndRound(a,3600))return this.getTimePastString(b,radioplayer.lang.search.hour_ago,radioplayer.lang.search.hours_ago)}else if(60<=a&&(b=this.divideAndRound(a,60)))return this.getTimePastString(b,radioplayer.lang.search.minute_ago,radioplayer.lang.search.minutes_ago);return this.getTimePastString(a,radioplayer.lang.search.second_ago,radioplayer.lang.search.seconds_ago)},getTimePastString:function(a,b,c){return 1==a?b:c=c.replace("{n}",a)},getSubtitle:function(a){return"PE_E"!=a.type&&
"PI_E"!=a.type||!a.artistName?a.name:a.artistName+" - "+a.name}};
radioplayer.playing={requestFailTimer:null,requestPlayingSecs:8E3,requestPlayingTimer:null,requestPlayingSecs_Song:15E4,showingPlayingType:"",showingText:"",playingArtist:"",playingTitle:"",animateEasing:"swing",pxPerSecond:90,scrollingContainerWidth:0,scrollTimeout:null,scrollDirection:"l",endPos:0,nowPlayingStripWidth:0,nowPlayingID3:"",receivedStreamData:!1,songAction:null,terminateUpdating:!1,windowHasFocus:!0,nowNextToggleTiming:7E3,init:function(){radioplayer.objs.nowPlayingStrip=$(".now-playing-strip");
radioplayer.objs.scrollingContainer=$(".scrolling-container");radioplayer.objs.scrollerText={now:$(".scrolling-text-now"),next:$(".scrolling-text-next")};radioplayer.playing.isScrolling="next";$("#live-strip .live-indicator").html(radioplayer.lang.playing.live);this.nowPlayingStripWidth=radioplayer.objs.nowPlayingStrip.width()-20;radioplayer.objs.scrollingContainer.css("left",radioplayer.lang.playing.live_width+"px");radioplayer.objs.scrollingContainer.on("mouseenter.start-scroller",function(){radioplayer.objs.nowPlayingStrip.addClass("mouse-over");
radioplayer.playing.startScrolling()}).on("mouseleave.reset-scroller",function(){radioplayer.playing.resetScroller(!0)}).on("focus",function(){radioplayer.mouseActive||radioplayer.objs.scrollingContainer.trigger("mouseenter.start-scroller")}).on("blur",function(){radioplayer.mouseActive||radioplayer.objs.scrollingContainer.trigger("mouseleave.reset-scroller")});$(window).on("blur",function(){radioplayer.playing.windowHasFocus&&(radioplayer.playing.windowHasFocus=!1,radioplayer.playing.stopUpdating())}).on("focus",
function(){radioplayer.playing.windowHasFocus||(radioplayer.playing.windowHasFocus=!0,!radioplayer.objs.body.hasClass("showing-overlay")&&audioLive&&radioplayer.playing.startUpdating())});$(radioplayer.services).on("gotSongAction",function(){""!=radioplayer.playing.showingText&&(radioplayer.utils.output("update text late with song action"),radioplayer.playing.updateText(radioplayer.playing.showingText,radioplayer.playing.showingPlayingType))});this.startUpdating()},startUpdating:function(){audioLive&&
"stream"!=nowPlayingSource&&(this.requestFailTimer=setTimeout(function(){radioplayer.playing.showFailMsg();nowPlayingSource="stream"},1E3),this.requestPlaying(),radioplayer.playing.artist_next&&(clearTimeout(radioplayer.playing.nowNextToggleTimeout),radioplayer.playing.nowNextToggleTimeout=setTimeout(radioplayer.playing.toggleNowNext,radioplayer.playing.nowNextToggleTiming)))},stopUpdating:function(a){"undefined"!=typeof a&&1==a&&(this.terminateUpdating=!0);clearTimeout(this.requestPlayingTimer);
clearTimeout(this.requestFailTimer);clearTimeout(this.nowNextToggleTimeout);this.showingText=this.showingPlayingType=""},startScrolling:function(){clearTimeout(radioplayer.playing.nowNextToggleTimeout);clearTimeout(radioplayer.playing.scrollTimeout);$(".scrolling-text").hasClass("scrolling-text--showing-next")?radioplayer.playing.isScrolling="next":radioplayer.playing.isScrolling="now";if($.browser.msie&&7==$.browser.version){$tempObj=$('\x3cdiv style\x3d"position:absolute;top:-999px;font-size:11px;"\x3e'+
radioplayer.objs.scrollerText[radioplayer.playing.isScrolling].children(".song-text").html()+"\x3c/div\x3e");radioplayer.objs.body.append($tempObj);var a=$tempObj.outerWidth();$tempObj.remove()}else a=radioplayer.objs.scrollerText[radioplayer.playing.isScrolling].children(".song-text").outerWidth();this.nowPlayingStripWidth=radioplayer.objs.nowPlayingStrip.width()-20;this.scrollingContainerWidth=this.nowPlayingStripWidth-radioplayer.lang.playing.live_width;$(".song-action--"+radioplayer.playing.isScrolling).length&&
(this.scrollingContainerWidth-=$(".song-action--"+radioplayer.playing.isScrolling).outerWidth()+5);a>this.scrollingContainerWidth&&(this.endPos=a-this.scrollingContainerWidth+10,this.nextScroll())},nextScroll:function(){var a=radioplayer.playing.calcDuraToAnimate(radioplayer.playing.endPos);"l"==radioplayer.playing.scrollDirection?(radioplayer.utils.output("animate to the left"),radioplayer.objs.scrollerText[radioplayer.playing.isScrolling].children(".song-text").animate({left:"-"+radioplayer.playing.endPos+
"px"},a,radioplayer.playing.animateEasing),radioplayer.playing.scrollDirection="r",radioplayer.playing.scrollTimeout=setTimeout(radioplayer.playing.nextScroll,a+3E3)):(radioplayer.utils.output("animate to the right (and reset)"),radioplayer.objs.scrollerText[radioplayer.playing.isScrolling].children(".song-text").animate({left:"0"},a,radioplayer.playing.animateEasing,function(){radioplayer.objs.nowPlayingStrip.removeClass("mouse-over")}),radioplayer.playing.scrollDirection="l")},resetScroller:function(a){clearTimeout(radioplayer.playing.scrollTimeout);
this.scrollDirection="l";a?(a=this.calcDuraToAnimate(4-radioplayer.objs.scrollerText[radioplayer.playing.isScrolling].children(".song-text").position().left),radioplayer.objs.scrollerText[radioplayer.playing.isScrolling].children(".song-text").stop(!0).animate({left:"0"},a,radioplayer.playing.animateEasing,function(){radioplayer.objs.nowPlayingStrip.removeClass("mouse-over");radioplayer.playing.artist_next&&(clearTimeout(radioplayer.playing.nowNextToggleTimeout),radioplayer.playing.nowNextToggleTimeout=
setTimeout(radioplayer.playing.toggleNowNext,radioplayer.playing.nowNextToggleTiming))})):(radioplayer.objs.scrollerText[radioplayer.playing.isScrolling].children(".song-text").stop(!0).css({left:"0"}),radioplayer.objs.nowPlayingStrip.removeClass("mouse-over"),radioplayer.playing.artist_next&&(clearTimeout(radioplayer.playing.nowNextToggleTimeout),radioplayer.playing.nowNextToggleTimeout=setTimeout(radioplayer.playing.toggleNowNext,radioplayer.playing.nowNextToggleTiming)))},calcDuraToAnimate:function(a){return Math.floor(a/
(this.pxPerSecond/1E3))},requestPlaying:function(){radioplayer.consts.block_now_next||(radioplayer.services.getAPI(radioplayer.consts.api.nowNext+"?rpId\x3d"+currentStationID+"\x26descriptionSize\x3d200\x26callback\x3dradioplayer.playing.receiveNowNext"),clearTimeout(this.requestPlayingTimer),this.requestPlayingTimer=setTimeout(function(){radioplayer.playing.requestPlaying()},radioplayer.playing.requestPlayingSecs))},receiveNowNext:function(a){clearTimeout(this.requestFailTimer);if(radioplayer.controls.noSupportShowing)return!1;
if(a.results.now){var b,c,d=b=null,e=null,f=null;a&&a.results&&a.results.now&&(c=a.results.now,"PE_E"==c.type||"PI_E"==c.type&&a.results.now.song?(b=c.artistName+" - "+c.name,radioplayer.playing.artist=c.artistName,radioplayer.playing.title=c.name,d="PE"):"PI"==c.type?(b=c=c.programmeName,d="PI"):"SI"==c.type&&(b=c=c.serviceDescription?c.serviceDescription:c.serviceName,d="SI"));a&&a.results&&a.results.next&&a.results.next[0]&&(c=a.results.next[0],"PE_E"==c.type||"PI_E"==c.type&&a.results.now.song)&&
(radioplayer.playing.artist_next=c.artistName,radioplayer.playing.title_next=c.name,e="NEXT: "+c.artistName+" - "+c.name,f="PE",d&&"PE"===d&&(b="NOW: "+b));b!==this.showingText&&this.updateText(b,d);e&&e!==this.showingNextText?this.updateNextText(e,f):e||(clearTimeout(radioplayer.playing.nowNextToggleTimeout),$(".scrolling-text").removeClass("scrolling-text--showing-next"),radioplayer.playing.artist_next=null,this.showingNextText=radioplayer.playing.title_next=null)}else radioplayer.playing.showFailMsg(),
nowPlayingSource="stream"},receive:function(a){},updateText:function(a,b){if(audioLive){$(".song-action--now").remove();if("PE"==b){if(this.songAction){var c=radioplayer.playing.songAction.baseurl,c=c.replace(/\[\[artist\]\]/gi,encodeURIComponent(encodeURIComponent(radioplayer.playing.artist))),c=c.replace(/\[\[title\]\]/gi,encodeURIComponent(encodeURIComponent(radioplayer.playing.title))),c=c.replace(/\[artist\]/gi,encodeURIComponent(radioplayer.playing.artist)),c=c.replace(/\[title\]/gi,encodeURIComponent(radioplayer.playing.title));
$songAction=$('\x3ca class\x3d"song-action song-action--now" href\x3d"'+c+'" target\x3d"_blank"\x3e'+radioplayer.playing.songAction.type+"\x3c/a\x3e");$(".scrolling-text").append($songAction);radioplayer.objs.scrollerText.now.css("right",$(".song-action--now").outerWidth()+10+"px")}else radioplayer.objs.scrollerText.now.css("right","0px");"PE"!=this.showingPlayingType&&""!=this.showingPlayingType&&(radioplayer.utils.output("now waiting long for now playing as this is a song"),clearTimeout(this.requestPlayingTimer),
this.requestPlayingTimer=setTimeout(function(){radioplayer.playing.requestPlaying()},radioplayer.playing.requestPlayingSecs_Song))}radioplayer.objs.scrollerText.now.children(".song-text").html(a);this.resetScroller(!1)}else $("#od-title").html(a);this.showingPlayingType=b;this.showingText=a},updateNextText:function(a,b){audioLive&&($(".song-action--next").remove(),radioplayer.objs.scrollerText.next.children(".song-text").html(a),clearTimeout(radioplayer.playing.nowNextToggleTimeout),radioplayer.playing.artist_next&&
(radioplayer.playing.nowNextToggleTimeout=setTimeout(radioplayer.playing.toggleNowNext,radioplayer.playing.nowNextToggleTiming)),"PE"==b&&(this.songAction?(b=radioplayer.playing.songAction.baseurl,b=b.replace(/\[\[artist\]\]/gi,encodeURIComponent(encodeURIComponent(radioplayer.playing.artist_next))),b=b.replace(/\[\[title\]\]/gi,encodeURIComponent(encodeURIComponent(radioplayer.playing.title_next))),b=b.replace(/\[artist\]/gi,encodeURIComponent(radioplayer.playing.artist_next)),b=b.replace(/\[title\]/gi,
encodeURIComponent(radioplayer.playing.title_next)),$songAction=$('\x3ca class\x3d"song-action song-action--next" href\x3d"'+b+'" target\x3d"_blank"\x3e'+radioplayer.playing.songAction.type+"\x3c/a\x3e"),$(".scrolling-text").append($songAction),radioplayer.objs.scrollerText.next.css("right",$(".song-action--next").outerWidth()+10+"px")):radioplayer.objs.scrollerText.next.css("right","0px")),this.showingNextText=a)},toggleNowNext:function(){if(radioplayer.controls.noSupportShowing)return $(".scrolling-text").removeClass("scrolling-text--showing-next"),
clearTimeout(radioplayer.playing.nowNextToggleTimeout),!1;$(".scrolling-text").toggleClass("scrolling-text--showing-next");radioplayer.playing.artist_next&&(clearTimeout(radioplayer.playing.nowNextToggleTimeout),radioplayer.playing.nowNextToggleTimeout=setTimeout(radioplayer.playing.toggleNowNext,radioplayer.playing.nowNextToggleTiming))},receiveOD:function(a){var b=!1;"SUCCESS"==a.responseStatus&&0<a.total&&$.each(a.results,function(a,d){"PI_OD"!=d[0].type&&"OD"!=d[0].type||!d[0].name||""==d[0].name||
(b=!0,radioplayer.playing.updateText(d[0].name,"OD"))});b||(nowPlayingSource="stream",radioplayer.playing.receivedStreamData&&this.updateText(radioplayer.playing.nowPlayingID3,"OD"))},showFailMsg:function(){this.updateText(currentStationName,"fallback")},metadataReceived:function(a,b){radioplayer.utils.output("Stream metadata received.");radioplayer.consts.consolelog&&console.dir(b);"metadata"==b.type&&(radioplayer.playing.receivedStreamData=!0,"undefined"!=typeof b.data.TIT2||"undefined"!=typeof b.data.songName?
(radioplayer.utils.output("id3 received"),b.data.TIT2?radioplayer.playing.title=b.data.TIT2:b.data.songName&&(radioplayer.playing.title=b.data.songName),b.data.TPE1?radioplayer.playing.artist=b.data.TPE1:b.data.artist&&(radioplayer.playing.artist=b.data.artist),a=radioplayer.playing.swapPlaceholdersForSong(),radioplayer.playing.nowPlayingID3=a,"stream"==nowPlayingSource&&radioplayer.playing.updateText(a,audioLive?"":"OD")):(radioplayer.utils.output("StreamTitle: "+b.data.StreamTitle),radioplayer.utils.output("StreamUrl: "+
b.data.StreamUrl),radioplayer.utils.output("Name: "+b.data.name),"stream"==nowPlayingSource&&(a=b.data.StreamTitle.split("~"),"MUSIC"==a[4]?(radioplayer.playing.artist=a[0],radioplayer.playing.title=a[1],a=radioplayer.playing.swapPlaceholdersForSong(),radioplayer.playing.nowPlayingID3=a,radioplayer.playing.updateText(a,audioLive?"":"OD")):radioplayer.playing.updateText(currentStationName,audioLive?"":"OD"))))},swapPlaceholdersForSong:function(){var a=radioplayer.lang.playing.format,a=a.replace("{artist}",
radioplayer.playing.artist);return a=a.replace("{track}",radioplayer.playing.title)},headerReceived:function(a,b){radioplayer.utils.output("header received");radioplayer.consts.consolelog&&console.dir(b)}};
radioplayer.mystations={received:!1,gotStnList:!1,maxStations:15,menuBtnNotificationTimeout:null,menuBtnNotificationTimeoutSub:null,init:function(){$(radioplayer.services).on("gotMyStationsAndHistory",function(){radioplayer.mystations.received=!0;radioplayer.mystations.gotStnList&&radioplayer.mystations.initPopulate()});$(radioplayer.services).on("stationListSet",function(){radioplayer.mystations.gotStnList=!0;radioplayer.mystations.received&&radioplayer.mystations.initPopulate()})},initPopulate:function(){radioplayer.utils.output("checking if my stations is already loaded");
$("#mystations-container").hasClass("loaded")&&(radioplayer.utils.output("loading in my stations late!"),radioplayer.mystations.populateList(radioplayer.settings.presets,"mystations"));$("#history-container").hasClass("loaded")&&radioplayer.mystations.populateList(radioplayer.settings.history,"history")},populateList:function(a,b){if(0==a.length)"mystations"==b&&$("#"+b+"-container").addClass("has-no-items").html('\x3cdiv class\x3d"no-overlay-items"\x3e'+radioplayer.lang.mystations.no_items+"\x3c/div\x3e");
else{var c=[];$.each(a,function(a,b){radioplayer.stnList[b]?c.push({rpId:b,serviceName:"",consoleUrl:radioplayer.stnList[b].playerUrl,imageUrl:""}):radioplayer.utils.output("Cant add station "+b+" to mystns list, not found in station list")});a='\x3ch2 class\x3d"access"\x3e'+("mystations"==b?radioplayer.lang.menu_tabs.tab_1_text:radioplayer.lang.menu_tabs.tab_2_text)+"\x3c/h2\x3e"+radioplayer.overlay.iterateResults(c,b);$("#"+b+"-container").html(a);radioplayer.overlay.lazyLoad($("#"+b+"-container"))}},
add:function(a,b,c){a=a.toString();radioplayer.services.analytics.sendEvent("Navigation","Add to Favourites",a,null,null);var d=radioplayer.settings.presets.length;if(radioplayer.settings.presets.length==radioplayer.mystations.maxStations){var e=radioplayer.settings.presets.pop();$("#mystations-container").hasClass("loaded")&&$('#mystations-container .overlay-item[data-stationid\x3d"'+e+'"]').remove();radioplayer.objs.overlayContainer.find('.overlay-item[data-stationid\x3d"'+e+'"]').removeClass("in-mystations").find(".toggle-mystations button").attr("title",
radioplayer.lang.mystations.add_this).find(".accessibility-text").html(radioplayer.lang.mystations.add_this);e==currentStationID&&($("#toggle-mystations").removeClass("in-mystations").attr("title",radioplayer.lang.mystations.add_this).find(".accessibility-text").html(radioplayer.lang.mystations.add_this),radioplayer.mystations.menuBtnNotificationTimeout&&(clearTimeout(radioplayer.mystations.menuBtnNotificationTimeout),$(".menu-btn-notification").removeClass("menu-btn-notification--active")),radioplayer.mystations.menuBtnNotificationTimeoutSub&&
clearTimeout(radioplayer.mystations.menuBtnNotificationTimeoutSub))}radioplayer.settings.presets.unshift(a);"head-controls"==b&&0<$('#mystations-container .overlay-item[data-stationid\x3d"'+a+'"]:not(.in-mystations)').length?radioplayer.utils.output("dont add it again"):$("#mystations-container").hasClass("loaded")&&"mystations-container"!==b&&(e=radioplayer.stnList[a],e=radioplayer.overlay.iterateResults([{rpId:a,serviceName:e.name,consoleUrl:e.playerUrl,imageUrl:e.logoUrl}],"mystations"),0==d&&
$("#mystations-container").removeClass("has-no-items").html(""),$("#mystations-container").prepend(e),radioplayer.overlay.lazyLoad($("#mystations-container")));radioplayer.objs.overlayContainer.find('.overlay-item[data-stationid\x3d"'+a+'"]').addClass("in-mystations").find(".toggle-mystations button").attr("title",radioplayer.lang.mystations.remove_this).find(".accessibility-text").html(radioplayer.lang.mystations.remove_this);c?(new radioplayer.mystations.heartAnimation(c.find("button"),!1),a==currentStationID&&
$("#toggle-mystations").addClass("in-mystations").attr("title",radioplayer.lang.mystations.remove_this).find(".accessibility-text").html(radioplayer.lang.mystations.remove_this)):"head-controls"==b&&new radioplayer.mystations.heartAnimation($("#toggle-mystations"),!0);radioplayer.services.saveMyStationsOrder()},remove:function(a,b,c){a=a.toString();radioplayer.settings.presets=jQuery.grep(radioplayer.settings.presets,function(b){return b!=a});radioplayer.services.analytics.sendEvent("Navigation",
"Remove from Favourites",a,null,null);!$("#mystations-container").hasClass("loaded")||"mystations-container"===b||$("#mystations-container").hasClass("showing")&&$("body").hasClass("showing-menu")||($('#mystations-container .overlay-item[data-stationid\x3d"'+a+'"]').remove(),0==radioplayer.settings.presets.length&&$("#mystations-container").addClass("has-no-items").html('\x3cdiv class\x3d"no-overlay-items"\x3e'+radioplayer.lang.mystations.no_items+"\x3c/div\x3e"));radioplayer.objs.overlayContainer.find('.overlay-item[data-stationid\x3d"'+
a+'"]').removeClass("in-mystations").find(".toggle-mystations button").attr("title",radioplayer.lang.mystations.add_this).find(".accessibility-text").html(radioplayer.lang.mystations.add_this);a==currentStationID&&($("#toggle-mystations").removeClass("in-mystations").attr("title",radioplayer.lang.mystations.add_this).find(".accessibility-text").html(radioplayer.lang.mystations.add_this),radioplayer.mystations.menuBtnNotificationTimeout&&(clearTimeout(radioplayer.mystations.menuBtnNotificationTimeout),
$(".menu-btn-notification").removeClass("menu-btn-notification--active")),radioplayer.mystations.menuBtnNotificationTimeoutSub&&clearTimeout(radioplayer.mystations.menuBtnNotificationTimeoutSub));radioplayer.services.saveMyStationsOrder()},purgeRemovedMyStations:function(){radioplayer.utils.output("purge my stations");$("#mystations-container .overlay-item:not(.in-mystations)").remove();0==radioplayer.settings.presets.length&&$("#mystations-container").addClass("has-no-items").html('\x3cdiv class\x3d"no-overlay-items"\x3e'+
radioplayer.lang.mystations.no_items+"\x3c/div\x3e")},heartAnimation:function(a,b){b&&($("#toggle-mystations").addClass("in-mystations"),$("body").hasClass("showing-overlay")||(a=2E3,$("html").hasClass("ie8")&&(a=6E3),$(".menu-btn-notification").show(),$(".menu-btn-notification").addClass("menu-btn-notification--active"),radioplayer.mystations.menuBtnNotificationTimeout=setTimeout(function(){$(".menu-btn-notification").removeClass("menu-btn-notification--active")},a)))}};
radioplayer.search={lastSuggestQ:"",q:"",requestFailTimer:null,requestFailed:!1,suggestQueryDelay:null,init:function(){radioplayer.objs.searchBox=$(".search-box");radioplayer.objs.searchInput=$("#search-input");radioplayer.objs.searchContainer=$(".search-container");radioplayer.objs.searchResults=$(".search-container .scrollable-wrapper");radioplayer.objs.suggestContainer=$(".suggest-container");radioplayer.objs.searchAllContainer=$("#search-all-cont");radioplayer.objs.searchLiveContainer=$("#search-live-cont");
radioplayer.objs.searchODContainer=$("#search-od-cont");setTimeout(function(){radioplayer.objs.searchInput.val(radioplayer.lang.search.search_radioplayer);$(".mirrored-input").html(radioplayer.lang.search.search_radioplayer)},100);$(".search-box h2").html(radioplayer.lang.search.search);$(".search-box #search-button").attr("title",radioplayer.lang.search.search).find(".search-btn-accessible").html(radioplayer.lang.search.search);$(".search-box #search-clear").attr("title",radioplayer.lang.search.clear).find(".search-btn-accessible").html(radioplayer.lang.search.clear);
$(".search-container .tabs ul li").eq(0).find("a span").html(radioplayer.lang.search.tab_all);$(".search-container .tabs ul li").eq(1).find("a span").html(radioplayer.lang.search.tab_live);$(".search-container .tabs ul li").eq(2).find("a span").html(radioplayer.lang.search.tab_catchup);radioplayer.objs.searchInput.on("focus click",function(){radioplayer.objs.searchInput.val()!=radioplayer.lang.search.search_radioplayer||radioplayer.objs.searchBox.hasClass("active")?""!=radioplayer.objs.searchInput.val()&&
radioplayer.objs.searchBox.hasClass("active")&&0<radioplayer.objs.suggestContainer.data("results")&&!radioplayer.objs.body.hasClass("showing-overlay")&&(radioplayer.overlay.show(radioplayer.lang.general.close_search),radioplayer.objs.body.addClass("showing-suggest"),radioplayer.search.lastSuggestQ!=radioplayer.objs.searchInput.val()&&radioplayer.search.execSuggest()):(radioplayer.utils.setCaretToPos(document.getElementById("search-input"),0),radioplayer.objs.searchInput.val(""))}).on("blur",function(){""==
radioplayer.objs.searchInput.val()&&radioplayer.objs.searchInput.val(radioplayer.lang.search.search_radioplayer);radioplayer.objs.searchBox.hasClass("active")&&""==radioplayer.objs.searchInput.val()&&(radioplayer.objs.body.hasClass("showing-suggest")?radioplayer.search.clearAndCloseSuggestResults():radioplayer.search.resetSearchInput())}).on("keydown",function(a){13==a.which&&a.preventDefault();9!=a.which&&(""!=radioplayer.objs.searchInput.val()||radioplayer.objs.searchBox.hasClass("active")?""===
radioplayer.objs.searchInput.val()||radioplayer.objs.body.hasClass("showing-search")||radioplayer.objs.body.hasClass("showing-suggest")||(radioplayer.overlay.show(radioplayer.lang.general.close_search),radioplayer.objs.body.addClass("showing-suggest")):-1!==$.inArray(a.which,[8,13,16,17,18,19,20,27,32,35,36,37,38,39,40,46,91,93,224])?a.preventDefault():(radioplayer.objs.searchInput.val("").enableSelection(),radioplayer.objs.searchBox.addClass("active"),radioplayer.objs.body.hasClass("showing-search")||
radioplayer.objs.body.hasClass("showing-suggest")||(radioplayer.overlay.show(radioplayer.lang.general.close_search),radioplayer.objs.body.addClass("showing-suggest"))))}).on("keyup",function(a){13==a.which&&a.preventDefault();radioplayer.overlay.resetInactivity();var b=radioplayer.objs.suggestContainer;38==a.which&&radioplayer.objs.body.hasClass("showing-suggest")?0==b.find(".suggest-item.on").length?b.find(".suggest-item:last").addClass("on kb-focus"):(a=b.find(".suggest-item").index(b.find(".suggest-item.on")),
b.find(".suggest-item.on").removeClass("on kb-focus"),b.find(".suggest-item").eq(a-1).addClass("on kb-focus")):40==a.which&&radioplayer.objs.body.hasClass("showing-suggest")?0==b.find(".suggest-item.on").length?b.find(".suggest-item:first").addClass("on kb-focus"):b.find(".suggest-item:last").hasClass("on")?(b.find(".suggest-item:last").removeClass("on kb-focus"),b.find(".suggest-item:first").addClass("on kb-focus")):(a=b.find(".suggest-item").index(b.find(".suggest-item.on")),b.find(".suggest-item.on").removeClass("on kb-focus"),
b.find(".suggest-item").eq(a+1).addClass("on kb-focus")):13==a.which?radioplayer.objs.body.hasClass("showing-suggest")?(b=b.find(".suggest-item.on.kb-focus"),1==b.length?b.hasClass("show-all")?radioplayer.search.execFull():(b=b.find("a").attr("href"),window.location.href=b):radioplayer.search.execFull()):radioplayer.objs.body.hasClass("showing-search")&&radioplayer.search.execFull():-1==$.inArray(a.which,[9,13,16,17,18,19,20,27,35,36,37,38,39,40,91,93,224])&&($(".mirrored-input").html(radioplayer.objs.searchInput.val()),
$("#search-clear").hide(),$("#search-button").show(),radioplayer.objs.body.hasClass("showing-suggest")?(b.find(".suggest-item.show-all").removeClass("on kb-focus"),""===radioplayer.objs.searchInput.val()?radioplayer.search.clearAndCloseSuggestResults():radioplayer.search.execSuggest()):""===radioplayer.objs.searchInput.val()&&radioplayer.search.resetSearchInput())}).disableSelection();radioplayer.objs.suggestContainer.on("click touchstart touchend",".suggest-item.show-all a",function(a){a.preventDefault();
a.stopPropagation();radioplayer.search.execFull()}).on("click","#suggest-results .suggest-item a",function(a){a.preventDefault();a=$(this).parent().data("rpid");var b=$(this).attr("href");radioplayer.services.analytics.sendEvent("Search","Autosuggest",a.toString(),null,null);setTimeout(function(){window.location.href=b},100)}).on("mouseenter",".suggest-item",function(){radioplayer.objs.suggestContainer.find(".suggest-item").removeClass("on kb-focus");$(this).addClass("on")}).on("mouseleave",".suggest-item",
function(){$(this).removeClass("on kb-focus")});$("#search-button").on("click",function(a){radioplayer.objs.searchInput.val()&&radioplayer.objs.searchInput.val()!==radioplayer.lang.search.search_radioplayer&&radioplayer.search.execFull()});$("#search-clear").on("click",function(a){radioplayer.search.resetSearchInput()});$("#search-all-cont, #search-live-cont, #search-od-cont").on("click",".station-group a.station-group-toggle",function(a){a.preventDefault();a=$(this);var b=a.parent().parent(),c=b.attr("data-brand");
if(b.hasClass("collapsed")){b.removeClass("collapsed");var d=radioplayer.lang.search.show_fewer_stations,d=d.replace("{group}",c);a.html("\x3ci\x3e\x3c/i\x3e"+d);$parentContainer=b.parent();radioplayer.overlay.lazyLoad($parentContainer)}else b.addClass("collapsed"),b=radioplayer.lang.search.show_more_stations,b=b.replace("{group}",c),a.html("\x3ci\x3e\x3c/i\x3e"+b)})},execSuggest:function(){var a=$.trim(radioplayer.objs.searchInput.val());regex=/(<([^>]+)>)/ig;var a=a.replace(regex,""),b=radioplayer.lang.search.show_all_results_for.replace("{terms}",
"\x3cstrong\x3e"+a+"\x3c/strong\x3e");$(".suggest-item.show-all a").html(b);clearTimeout(radioplayer.search.suggestQueryDelay);radioplayer.search.suggestQueryDelay=setTimeout(function(){""!=a&&a!=radioplayer.search.lastSuggestQ&&(radioplayer.search.lastSuggestQ=a,radioplayer.services.getAPI(radioplayer.consts.api.suggest+"?query\x3d"+encodeURIComponent(a)+"\x26callback\x3dradioplayer.search.receiveSuggest\x26lang\x3d"+langCode))},150)},receiveSuggest:function(a){var b='\x3ch2 class\x3d"access"\x3e'+
radioplayer.lang.search.suggested_title+"\x3c/h2\x3e",c=0;0<a.live.length&&(b+='\x3cdiv class\x3d"suggest-divider"\x3e'+radioplayer.lang.search.suggested_stations+"\x3c/div\x3e",$.each(a.live,function(a,e){b+='\x3cdiv class\x3d"suggest-item'+(e.name?" has-prog-name":"")+'" data-rpid\x3d"'+e.rpId+'"\x3e\x3ca href\x3d"'+e.url+'"\x3e\x3cimg class\x3d"image" src\x3d"'+e.imageUrl+'" alt\x3d"" /\x3e\x3cspan class\x3d"name"\x3e'+e.serviceName+"\x3c/span\x3e"+(e.name?'\x3cspan class\x3d"prog-name"\x3e'+e.name+
"\x3c/span\x3e":"")+"\x3c/a\x3e\x3c/div\x3e";c++}));0<a.onDemand.length&&(b+='\x3cdiv class\x3d"suggest-divider"\x3e'+radioplayer.lang.search.suggested_catch_up+"\x3c/div\x3e",$.each(a.onDemand,function(a,e){b+='\x3cdiv class\x3d"suggest-item has-prog-name" data-rpid\x3d"'+e.rpId+'"\x3e\x3ca href\x3d"'+e.url+'"\x3e\x3cimg class\x3d"image" src\x3d"'+e.imageUrl+'" alt\x3d"" /\x3e\x3cspan class\x3d"name"\x3e'+e.serviceName+'\x3c/span\x3e\x3cspan class\x3d"prog-name"\x3e'+e.name+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e";
c++}));radioplayer.objs.suggestContainer.data("results",c);$("#suggest-results").html(b)},resetSearchInput:function(){$("#search-clear").hide();$("#search-button").show();radioplayer.objs.searchBox.removeClass("active");radioplayer.objs.searchInput.val(radioplayer.lang.search.search_radioplayer).disableSelection().focus();$(".mirrored-input").html(radioplayer.lang.search.search_radioplayer);radioplayer.utils.setCaretToPos(document.getElementById("search-input"),0)},clearAndCloseSuggestResults:function(){$("#suggest-results").html("");
$(".suggest-item.show-all a").html("");radioplayer.search.lastSuggestQ="";radioplayer.overlay.hide();radioplayer.search.resetSearchInput()},execFull:function(){var a=$.trim(radioplayer.objs.searchInput.val()),a=a.replace(/(<([^>]+)>)/ig,"");if(""!=a){radioplayer.objs.body.hasClass("showing-search")||radioplayer.objs.body.addClass("showing-search");radioplayer.objs.searchContainer.off();radioplayer.objs.searchContainer.find(".tab-container").html("").removeClass("loaded has-error");$prevSelTab=$(".search-container .tabs li.on");
$prevSelTab.removeClass("on");radioplayer.overlay.selectTab(radioplayer.objs.searchContainer.find(".tabs li").eq(0));radioplayer.search.showTabSpinner();radioplayer.consts.is_iOS||radioplayer.objs.searchInput.focus();$("#search-button").hide();$("#search-clear").show();radioplayer.search.requestFailed=!1;radioplayer.search.requestFailTimer=setTimeout(function(){radioplayer.search.showFailMsg("all")},15E3);var b="?query\x3d"+encodeURIComponent(a)+"\x26descriptionSize\x3d70\x26rpId\x3d"+currentStationID+
"\x26callback\x3dradioplayer.search.receiveall\x26lang\x3d"+langCode;""!=radioplayer.settings.guid&&(b+="\x26guid\x3d"+radioplayer.settings.guid);radioplayer.services.getAPI(radioplayer.consts.api.search+b);radioplayer.search.q=a}else radioplayer.consts.is_iOS||radioplayer.objs.searchInput.focus()},tabRequest:function(a){this.showTabSpinner();radioplayer.search.requestFailed=!1;radioplayer.search.requestFailTimer=setTimeout(function(){radioplayer.search.showFailMsg(a)},15E3);var b="?query\x3d"+encodeURIComponent(radioplayer.search.q)+
"\x26descriptionSize\x3d70\x26rpId\x3d"+currentStationID+"\x26callback\x3dradioplayer.search.receive"+a+"\x26lang\x3d"+langCode;""!=radioplayer.settings.guid&&(b+="\x26guid\x3d"+radioplayer.settings.guid);radioplayer.services.getAPI(radioplayer.consts.api.search+"/"+a+b)},receiveall:function(a){this.receiveParse("all",a)},receivelive:function(a){this.receiveParse("live",a)},receiveod:function(a){this.receiveParse("od",a)},showTabSpinner:function(){radioplayer.objs.searchContainer.find(".tabs-wrapper .spinner").show()},
hideTabSpinner:function(){radioplayer.objs.searchContainer.find(".tabs-wrapper .spinner").hide()},receiveParse:function(a,b){clearTimeout(this.requestFailTimer);if(!this.requestFailed)if("SUCCESS"==b.responseStatus){var c='\x3ch2 class\x3d"access"\x3e'+radioplayer.lang.search["tab_"+a+"_title"]+"\x3c/h2\x3e";0==b.total?(c=this.noResultsMsg(a,radioplayer.search.q),$("#search-"+a+"-cont").addClass("has-error")):c+=radioplayer.overlay.iterateResults(b.results,"search");this.hideTabSpinner();$("#search-"+
a+"-cont").html(c);$("#search-"+a+"-cont").scrollTop(0);radioplayer.overlay.lazyLoad($("#search-"+a+"-cont"))}else this.showFailMsg(a)},noResultsMsg:function(a,b){a="live"==a?radioplayer.lang.search.no_live_results:"od"==a?radioplayer.lang.search.no_od_results:radioplayer.lang.search.no_all_results;a='\x3cdiv class\x3d"error-message no-results"\x3e'+a.replace("{terms}",b)+"\x3c/div\x3e";radioplayer.services.analytics.sendEvent("Search","Zero Results",b,null,null);return a},showFailMsg:function(a){this.requestFailed=
!0;this.hideTabSpinner();var b='\x3cdiv class\x3d"error-message fail"\x3e'+radioplayer.lang.general.fail_message+"\x3c/div\x3e";$("#search-"+a+"-cont").addClass("has-error").html(b);radioplayer.services.analytics.sendEvent("Errors","Failed Search",currentStationID,null,null)}};var canRunAds=!0,com_adswizz_synchro_decorateUrl=!1;
radioplayer.adswizz={DEBUG:!1,overlayTimeout:null,enabled:!1,playerId:"UKRP",adswizzDomain:"",prerollZoneId:0,midrollZoneId:0,adswizzCookie:{name:"adswizz_oaid",path:"/",secure:!1},init:function(){if(this.enabled=adsWizz.enabled||!1)this.DEBUG&&radioplayer.utils.output("[adswizz] Initialising adswizz."),this.playerId=adsWizz.playerId||"UKRP",this.adswizzDomain=adsWizz.domain||"demo",this.prerollZoneId=adsWizz.prerollZoneId||0,this.midrollZoneId=adsWizz.midrollZoneId||0,this.DEBUG&&radioplayer.utils.output("[adswizz] playerId: "+
this.playerId+"\n          domain: "+this.adswizzDomain+"\n          preroll zone Id: "+this.prerollZoneId+"\n          midroll zone Id: "+this.midrollZoneId),this.decorateAllStreamUrls()||(this.enabled=!1),this.DEBUG&&radioplayer.utils.output("[adswizz] AdsWizz "+(this.enabled?"enabled.":"disabled."))},decorateAllStreamUrls:function(){var a=-1;if(!com_adswizz_synchro_decorateUrl)return!1;for(var b=0;b<audioArray.length;b++)try{audioArray[b].audioUrl=this.decorateStreamUrl(audioArray[b].audioUrl),
a=b,this.DEBUG&&radioplayer.utils.output("[adswizz] Decorated stream: "+audioArray[b].audioUrl)}catch(c){radioplayer.utils.output("[adswizz] Stream decoration failed: "+c.message)}-1===a?(a=!1,radioplayer.utils.output("[adswizz] All streams failed to decorate.")):(a=!0,this.DEBUG&&radioplayer.utils.output("[adswizz] Stream(s) decorated. ListenerId: "+this.getListenerId()));return a},decorateStreamUrl:function(a){var b=encodeURIComponent("amsparams\x3dplayerid:"+this.playerId+";skey:"+String(parseInt((new Date).getTime()/
1E3)));a+=(0<a.indexOf("?")?"\x26":"?")+b;try{a=com_adswizz_synchro_decorateUrl(a)}catch(c){throw radioplayer.utils.output("[adswizz] Could not decorate stream "+a+"\n          Error ["+c.name+"]: "+c.message),b=new radioplayer.exceptions.decorateStreamURLException,b.message="Could not decorate stream URL ("+a+").",b;}return a},setListenerId:function(a){var b=(new Date(2030,31,11,0,0,0,0)).toUTCString();radioplayer.utils.setLocalCookie(this.adswizzCookie.name,a,b,this.adswizzCookie.path,this.adswizzCookie.domain,
this.adswizzCookie.secure);this.DEBUG&&radioplayer.utils.output("[adswizz] Persisted listenerId: "+a)},getListenerId:function(){var a=radioplayer.utils.getLocalCookie(this.adswizzCookie.name);""===a&&(a=this.generateListenerId(),this.setListenerId(a));this.DEBUG&&radioplayer.utils.output("[adswizz] Retrieved listenerId: "+a);return a},generateListenerId:function(){var a=com_adswizz_synchro_listenerid;if(null===a||"undefined"===typeof a)a=(new Date).getTime()+"_"+Math.random();this.DEBUG&&radioplayer.utils.output("[adswizz] Generated new listenerId: "+
a);return a},parseMetadata:function(a,b){if(radioplayer.adswizz.enabled&&"metadata"==b.type){var c=b.data;if("undefined"!==typeof c.durationMilliseconds&&"undefined"!==typeof c.insertionType&&"undefined"!==typeof c.metadata&&(radioplayer.adswizz.DEBUG&&radioplayer.utils.output("[adswizz] Adswizz metadata received. Data:"),radioplayer.adswizz.DEBUG&&radioplayer.utils.output(c),-1!==c.metadata.indexOf("adswizzContext\x3d")))if(null!==radioplayer.adswizz.overlayTimeout&&clearTimeout(radioplayer.adswizz.overlayTimeout),
a=parseInt(c.durationMilliseconds),b=c.metadata.replace("adswizzContext\x3d","")){radioplayer.adswizz.DEBUG&&radioplayer.utils.output("[adswizz] AdsWizz Context: ",b);var d="zoneid\x3d",d="midroll"===c.insertionType?d+radioplayer.adswizz.midrollZoneId:d+radioplayer.adswizz.prerollZoneId,c="cb\x3d"+String((new Date).getTime());b="//"+radioplayer.adswizz.adswizzDomain+".adswizz.com/www/delivery/afr.php?"+d+"\x26playerid\x3d"+radioplayer.adswizz.playerId+"\x26context\x3d"+b+"\x26"+c;radioplayer.adswizz.DEBUG&&
radioplayer.utils.output("[adswizz] Showing companion ad in overlay. Resource URL: "+b);radioplayer.services.overlay.adswizz(b,a);radioplayer.adswizz.DEBUG&&radioplayer.utils.output("[adswizz] AdsWizz Duration: "+a/1E3+"sec")}else radioplayer.adswizz.DEBUG&&radioplayer.utils.output("[adswizz] Did not receive AdsWizz Context within metadata.")}}};$(radioplayer.emp).on("metadata",radioplayer.adswizz.parseMetadata);
radioplayer.controls={rawDuration:0,duration:"00:00",muted:!1,currentVolume:100,savedVolume:0,currentPosition:0,volumeLocked:!1,volumeScrubHeight:44,progressScrubWidth:262,volumeScrubOffsetY:5,dragging:!1,isAllLoaded:!1,isLoading:!1,insertedODButtons:!1,isPlaying:!1,userClickedControls:!1,userPaused:!1,isListening:!1,mouseOverProgress:!1,volControlLeft:0,volControlWidth:0,muteThres:15,topEndThres:6,volWavesWidth:0,volumeHover:0,mouseDownOnVolume:!1,pressPlayPromptShowing:!1,streamHasStarted:!1,noSupportShowing:!1,
showPressPlayPrompt:function(){if(!radioplayer.controls.pressPlayPromptShowing){(radioplayer.consts.is_Android||radioplayer.consts.is_iOS)&&$("#volume-control").addClass("disabled");$("#live-strip").removeClass("loading");$("#live-strip").addClass("live-play-prompt");var a=$(".icon-play");$(".icon-play").addClass("play-prompt");radioplayer.controls.pressPlayPromptShowing=!0;a.on("click",function(){radioplayer.controls.hidePressPlayPrompt()});this.hideLoader();$(radioplayer.emp).on("startPlaying.hidePlayPrompt",
function(){radioplayer.controls.hidePressPlayPrompt();$(radioplayer.emp).off("startPlaying.hidePlayPrompt")})}},hidePressPlayPrompt:function(){radioplayer.controls.pressPlayPromptShowing&&(radioplayer.controls.pressPlayPromptShowing=!1,$(".icon-play").removeClass("play-prompt"),$("#live-strip").removeClass("live-play-prompt"))},formatPosition:function(a){0>a&&(a=0);var b=Math.floor(a/1E3%60),c=Math.floor(a/6E4%60);a=Math.floor(a/36E5%24);2>String(c).length&&(c="0"+c);2>String(b).length&&(b="0"+b);
return a+":"+c+":"+b},cleanup:function(){this.isLoading=this.isAllLoaded=!1},mute:function(){(this.muted=!this.muted)?(this.savedVolume=this.currentVolume,this.currentVolume=0,(radioplayer.emp.player.flash&&radioplayer.emp.player.flash.used||radioplayer.emp.player.html&&radioplayer.emp.player.html.used)&&radioplayer.emp.setVolume(0)):radioplayer.emp.setVolume(Math.round(this.savedVolume))},onVolumeUpdate:function(a,b){this.currentVolume=b.volume;0==b.volume?this.isListening&&this.isPlaying&&(radioplayer.controls.onSilent("mute"),
this.isListening=!1):!this.isListening&&this.isPlaying&&(radioplayer.controls.onAudible(),this.isListening=!0);a=0==b.volume?"muted":20>b.volume?"p20":40>b.volume?"p40":60>b.volume?"p60":80>b.volume?"p80":"p100";$("#volume-control").removeClass("muted p20 p40 p60 p80 p100").addClass(a)},volumeIconMouseEnter:function(){if(!radioplayer.consts.is_iOS&&!this.volumeLocked||!radioplayer.consts.is_Android&&!this.volumeLocked)this.volControlLeft=$("#volume-control").offset().left,this.volControlWidth=$("#volume-control").outerWidth(),
this.volWavesWidth=this.volControlWidth-this.muteThres-this.topEndThres,$("#volume-control").addClass("hover")},volumeIconMouseLeave:function(){if(!radioplayer.consts.is_iOS&&!this.volumeLocked||!radioplayer.consts.is_Android&&!this.volumeLocked)$("#volume-control").removeClass("hover muted p20 p40 p60 p80 p100"),radioplayer.controls.muted?$("#volume-control").addClass("muted"):20>radioplayer.controls.currentVolume?$("#volume-control").addClass("p20"):40>radioplayer.controls.currentVolume?$("#volume-control").addClass("p40"):
60>radioplayer.controls.currentVolume?$("#volume-control").addClass("p60"):80>radioplayer.controls.currentVolume?$("#volume-control").addClass("p80"):$("#volume-control").addClass("p100")},volumeIconMouseMove:function(a){if(!radioplayer.consts.is_iOS&&!this.volumeLocked||!radioplayer.consts.is_Android&&!this.volumeLocked)a=a.pageX-radioplayer.controls.volControlLeft,a<radioplayer.controls.muteThres?radioplayer.controls.mouseDownOnVolume?(a="muted",$("#volume-control").attr("title",radioplayer.lang.controls.unmute)):
radioplayer.controls.muted?(a="muted",$("#volume-control").attr("title",radioplayer.lang.controls.unmute)):(a=20>radioplayer.controls.currentVolume?"p20":40>radioplayer.controls.currentVolume?"p40":60>radioplayer.controls.currentVolume?"p60":80>radioplayer.controls.currentVolume?"p80":"p100",$("#volume-control").attr("title",radioplayer.lang.controls.mute)):a>=radioplayer.controls.volControlWidth-radioplayer.controls.topEndThres?(a="p100",radioplayer.controls.volumeHover=100,$("#volume-control").attr("title",
radioplayer.lang.controls.set_volume_100)):(radioplayer.controls.volumeHover=Math.round((a-radioplayer.controls.muteThres)/radioplayer.controls.volWavesWidth*100),a=20>radioplayer.controls.volumeHover?"p20":40>radioplayer.controls.volumeHover?"p40":60>radioplayer.controls.volumeHover?"p60":80>radioplayer.controls.volumeHover?"p80":"p100",$("#volume-control").attr("title",radioplayer.lang.controls.set_volume)),$("#volume-control").removeClass("muted p20 p40 p60 p80 p100").addClass(a)},volumeIconMouseDown:function(a){if(!radioplayer.consts.is_iOS&&
!this.volumeLocked||!radioplayer.consts.is_Android&&!this.volumeLocked)a.originalEvent.preventDefault?a.originalEvent.preventDefault():a.originalEvent.returnValue=!1,1===a.which&&(radioplayer.controls.mouseDownOnVolume=!0)},volumeIconMouseUp:function(a){(radioplayer.consts.is_iOS||this.volumeLocked)&&(radioplayer.consts.is_Android||this.volumeLocked)||1!==a.which||(radioplayer.controls.mouseDownOnVolume=!1)},volumeIconClick:function(a){radioplayer.consts.is_iOS||radioplayer.consts.is_Android?$("#volume-controls").hasClass("showing-prompt")||
(radioplayer.controls.hidePressPlayPrompt(),$("#volume-controls").addClass("showing-prompt").append('\x3cdiv class\x3d"point-prompt volume-prompt" id\x3d"volume-prompt"\x3e'+radioplayer.lang.controls.use_device_controls+'\x3cspan class \x3d "icon-info_outline"\x3e\x3c/span\x3e\x3cdiv class\x3d"point-prompt-arrow"\x3e\x3c/div\x3e\x3c/div\x3e'),$("#volume-prompt").on("click",function(){$("#volume-controls").removeClass("showing-prompt");$("#volume-prompt").remove()}),setTimeout(function(){$("#volume-controls").removeClass("showing-prompt");
$("#volume-prompt").remove()},4E3)):this.volumeLocked||(a.pageX-radioplayer.controls.volControlLeft<radioplayer.controls.muteThres?(radioplayer.utils.output("clicked mute"),radioplayer.controls.mute()):(radioplayer.utils.output("SET TO "+radioplayer.controls.volumeHover),radioplayer.controls.muted&&radioplayer.controls.mute(),radioplayer.emp.setVolume(radioplayer.controls.volumeHover),radioplayer.services.saveCookie("vl/s","vl",radioplayer.controls.volumeHover)))},setVolumeTo:function(a){radioplayer.utils.output("access log "+
a);this.muted&&this.mute();radioplayer.emp.setVolume(Math.round(a));radioplayer.services.saveCookie("vl/s","vl",a)},showPlay:function(a,b){$("#pause").is(":visible")&&$("#pause").hide();$("#stop").is(":visible")&&$("#stop").hide();$("#play").is(":visible")||($("#play").show(),$.browser.msie&&$("#play").css("display","block"));this.userClickedControls&&$("#play").focus();this.userClickedControls=!1},hidePlay:function(a,b){this.isLive()?($("#pause").is(":visible")&&$("#pause").hide(),$("#stop").is(":visible")||
($("#stop").show(),$.browser.msie&&$("#stop").css("display","block")),$("#progress-scrubber-load-bar").is(":visible")&&$("#progress-scrubber-load-bar").hide()):($("#pause").is(":visible")||($("#pause").show(),$.browser.msie&&$("#pause").css("display","block")),$("#stop").is(":visible")&&$("#stop").hide(),$("#progress-scrubber-load-bar").is(":visible")||$("#progress-scrubber-load-bar").show());$("#play").is(":visible")&&$("#play").hide();this.userClickedControls&&(audioLive?$("#stop").focus():$("#pause").focus());
this.userClickedControls=!1},toggleMyStations:function(a){a.preventDefault();$("#toggle-mystations").hasClass("in-mystations")?radioplayer.mystations.remove(currentStationID,"head-controls"):$("#toggle-mystations").hasClass("animating")||radioplayer.mystations.add(currentStationID,"head-controls")},onPositionUpdate:function(a,b,c){this.currentPosition=c?this.currentPosition:b.position/1E3;a=c?1E3*this.currentPosition:b.position;this.isAllLoaded?($("#progress-scrubber-load-bar").width($("#progress-scrubber-background").width()+
"px"),$("#duration").html(this.formatPosition(a)+"/"+this.duration)):$("#progress-scrubber-handle").is(":visible")&&$("#progress-scrubber-handle").hide();a/=this.rawDuration;b=a*$("#progress-scrubber-background").width();this.dragging||$("#progress-scrubber-handle").css("left",b+"px");a*=$("#progress-scrubber-background").outerWidth();$("#progress-scrubber-playback-bar").width(a)},onLoadProgressUpdate:function(a,b){this.isLive()?($("#progress-scrubber-load-bar").width("0px"),this.isLoading=!1,$("#duration").is(":visible")&&
$("#duration").hide()):($("#progress-scrubber-load-bar").width($("#progress-scrubber-background").width()*b.loadProgress+"px"),.99<=b.loadProgress?(this.isAllLoaded=!0,radioplayer.utils.output("fire emp loaded event"),$(radioplayer.emp).trigger("loaded"),$("#progress-scrubber-load-bar").width($("#progress-scrubber-background").width()+"px")):this.isAllLoaded=!1)},hideLoaderOnStart:function(a,b){this.hideLoader();this.isLive()&&(this.isAllLoaded=!0)},hideLoader:function(a,b){this.isLoading=!1;this.isLive()?
($("#live-strip").removeClass("loading"),$("#live-strip").removeClass("play-prompt-indicator")):($("#od-strip #duration").show(),$("#progress-scrubber-playback-bar").is(":visible")||$("#progress-scrubber-playback-bar").show())},showLoader:function(a,b){this.isLoading=!0;this.isLive()?$("#live-strip").addClass("loading"):($("#progress-scrubber-handle").is(":visible")&&$("#progress-scrubber-handle").hide(),$("#duration").html(radioplayer.lang.controls.loading),"none"===$("#duration").css("display")&&
$("#duration").show())},setDuration:function(a,b){if(!audioLive&&(this.rawDuration=b.duration,this.duration=this.formatPosition(this.rawDuration),this.checkDuration(),a=Math.floor(b.duration/1E3),0==this.insertedODButtons)){b='\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"5" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_forward_5_seconds+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"-5" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_back_5_seconds+
"\x3c/button\x3e";var c='\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"30" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_forward_30_seconds+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"-30" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_back_30_seconds+"\x3c/button\x3e",d='\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"60" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_forward_1_minute+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"-60" tabindex\x3d"0"\x3e'+
radioplayer.lang.controls.skip_back_1_minute+"\x3c/button\x3e",e='\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"300" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_forward_5_minutes+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"-300" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_back_5_minutes+"\x3c/button\x3e",f='\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"600" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_forward_10_minutes+
'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"-600" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_back_10_minutes+"\x3c/button\x3e",g='\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"1800" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_forward_30_minutes+'\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"access od-skip" data-offset\x3d"-1800" tabindex\x3d"0"\x3e'+radioplayer.lang.controls.skip_forward_30_minutes+"\x3c/button\x3e";
3600<a?$("#od-strip").append(d+f+g):600<a?$("#od-strip").append(c+d+e):120<a?$("#od-strip").append(b+c+d):30<a?$("#od-strip").append(b+c):$("#od-strip").append(b);this.insertedODButtons=!0}},checkDuration:function(){this.isLive()?($("#live-strip").show(),$("#od-strip").hide()):($("#live-strip").hide(),$("#od-strip").show(),this.isAllLoaded?"none"===$("#progress-scrubber-playback-bar").css("display")&&$("#progress-scrubber-playback-bar").show():($("#progress-scrubber-handle").is(":visible")&&$("#progress-scrubber-handle").hide(),
$("#progress-scrubber-playback-bar").is(":visible")&&$("#progress-scrubber-playback-bar").hide(),$("#duration").html(radioplayer.lang.controls.loading)),$(window).on("resize",function(){if(!radioplayer.controls.isPlaying)radioplayer.controls.onPositionUpdate(null,null,!0)}));this.isPlaying&&this.hidePlay();this.isLoading&&$("#duration").html(radioplayer.lang.controls.loading)},isLive:function(){return radioplayer.emp.ready&&radioplayer.emp.currentPlayer?"live"===radioplayer.emp.getPlaybackMode():
0===this.rawDuration||null==this.rawDuration},resetDuration:function(a,b){this.rawDuration=0;this.duration=this.formatPosition(0);this.onPositionUpdate(null,{position:0});this.checkDuration()},seek:function(a){if(this.lastPosition!==$("#progress-scrubber-handle").offset().left){$("html").hasClass("ie8");this.lastPosition=a=$("#progress-scrubber-handle").position().left;var b=$("#progress-scrubber-background").width();a/=b;b=a*this.rawDuration;$("#duration").html(this.formatPosition(b)+"/"+this.duration);
$("#progress-scrubber-playback-bar").outerWidth(a*$("#progress-scrubber-background").width())}},seekStart:function(){this.dragging=!0;radioplayer.emp.pause()},seekStop:function(a){this.dragging=!1;this.updateSeekPosition(a);$("#progress-scrubber-handle").is(":visible")&&!this.mouseOverProgress&&($("#progress-scrubber-handle").fadeOut(200),$("#od-title").fadeIn(200));radioplayer.services.analytics.sendEvent("Navigation","On Demand Slider",window.location.href,null,null)},seekOffset:function(a){a=this.currentPosition+
parseInt(a);var b=this.rawDuration/1E3;a>b&&(a=b);radioplayer.emp.seek(a)},updateSeekPosition:function(a){a=$("#progress-scrubber-background").width();a=this.lastPosition/a*this.rawDuration/1E3;a=Math.max(a,0);radioplayer.emp.seek(a)},progressBarClick:function(a){if(!this.isLive()&&this.isAllLoaded){a=a.pageX-$("#progress-scrubber-background").offset().left;var b=$("#progress-scrubber-handle").outerWidth()/2,c=$("#progress-scrubber-background").outerWidth()-$("#progress-scrubber-handle").outerWidth()/
2;a=a<b?0:a>c?1:a/$("#progress-scrubber-background").outerWidth();radioplayer.emp.seek(a*this.rawDuration/1E3);radioplayer.services.analytics.sendEvent("Navigation","On Demand Slider",window.location.href,null,null)}},mouseEnterProgress:function(){!this.isLive()&&this.isAllLoaded&&(this.mouseOverProgress=!0,$("#progress-scrubber-handle").stop(!0,!0).fadeIn(200),$("#od-title").stop(!0,!0).fadeOut(200))},mouseLeaveProgress:function(){!this.isLive()&&this.isAllLoaded&&(this.mouseOverProgress=!1,this.dragging||
($("#progress-scrubber-handle").stop(!0,!0).fadeOut(200),$("#od-title").stop(!0,!0).fadeIn(200)))},logSecurityError:function(a,b){radioplayer.utils.output("EMP has encountered a security error, audio may not play.");"flash"===radioplayer.emp.currentPlayer&&"hls"===window.audioArray[radioplayer.emp.audioArrayInteger].audioType&&(radioplayer.emp.player.flash.ioErrorCount=0,clearTimeout(radioplayer.emp.player.flash.ioErrorTimeout),radioplayer.emp.player.flash.stop(),radioplayer.emp.player.flash.cleanup(),
$.proxy(this.onNoSupport,this)())},onEnd:function(a,b){radioplayer.utils.output("end");this.onPositionUpdate(null,{position:this.rawDuration})},onAudible:function(){0==this.isListening&&0<this.currentVolume&&(radioplayer.services.analytics.sendPageview(""),this.isListening=!0)},onSilent:function(a){1==this.isListening&&(radioplayer.services.analytics.sendPageview("/"+a),this.isListening=!1)},onStart:function(){this.isPlaying=!0;this.hideLoader();this.hideErrorMsg()},onStop:function(){this.isPlaying=
!1;audioLive&&"stream"==nowPlayingSource&&radioplayer.playing.updateText(currentStationName,"")},onClickPause:function(){this.userPaused=this.userClickedControls=!0},onClickPlay:function(){radioplayer.adswizz.enabled&&radioplayer.adswizz.decorateAllStreamUrls();this.showLoader();this.userClickedControls=!0},onClickStop:function(){this.hideLoader();this.userClickedControls=!0},onNoSupport:function(){radioplayer.utils.output("The EMP player does not support the audio format. (Varies by browser and whether Flash available.). Just tried using "+
radioplayer.emp.currentPlayer);this.hideLoader();if(radioplayer.emp.audioArrayInteger<window.audioArray.length-1)radioplayer.emp.audioArrayInteger++,radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime),radioplayer.emp.dataReady();else if(1>radioplayer.emp.audioPreference)radioplayer.emp.audioPreference++,radioplayer.emp.audioArrayInteger=0,radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime),radioplayer.emp.dataReady();else if(radioplayer.emp.player.html.audioHTMLFallback){var a=
$.extend(!0,[],radioplayer.emp.player.html.audioHTMLFallback);radioplayer.emp.player.html.audioHTMLFallback=null;radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime,a);radioplayer.emp.dataReady()}else{this.showPlay();if(this.noSupportShowing)return!1;this.noSupportShowing=!0;radioplayer.playing.stopUpdating();radioplayer.playing.showFailMsg();this.showErrorMsg(radioplayer.lang.stream_error.device_incompatible);radioplayer.services.analytics.sendEvent("Error","Device Incompatible",
null,null,null)}},ioError:function(){radioplayer.emp.player.flash.ioErrorCount++;radioplayer.emp.player.flash.ioErrorTimeout&&clearTimeout(radioplayer.emp.player.flash.ioErrorTimeout);radioplayer.emp.player.flash.ioErrorTimeout=setTimeout(function(){radioplayer.emp.player.flash.ioErrorCount=0},6E4);3<=radioplayer.emp.player.flash.ioErrorCount&&(radioplayer.emp.player.flash.ioErrorCount=0,clearTimeout(radioplayer.emp.player.flash.ioErrorTimeout),radioplayer.emp.player.flash.stop(),radioplayer.emp.player.flash.cleanup(),
$.proxy(this.onNoSupport,this)())},onError:function(){this.hideLoader();this.showPlay();radioplayer.emp.resetAttemptCount();radioplayer.services.analytics.sendEvent("Error","Stream Unavailable",rpId,null,null);this.showErrorMsg(radioplayer.lang.stream_error.unavailable)},showErrorMsg:function(a){$(".radioplayer-body").append('\x3cdiv class\x3d"radioplayer-erroroverlay"\x3e'+a+"\x3c/div\x3e")},hideErrorMsg:function(){$(".radioplayer-erroroverlay").remove()},startPlayingInit:function(a){console.log(":::: startPlayingInit ::::");
if(vastAds&&vastAds.enabled&&!vastAds.shownVideo&&tritonAds&&tritonAds.enabled)return audioLive?radioplayer.emp.stop():radioplayer.emp.pause(),!1;$.proxy(this.hidePlay,this)();$.proxy(this.hideLoaderOnStart,this)();$.proxy(this.onStart,this)();$.proxy(this.onAudible,this)();this.streamHasStarted=!0},resumeInit:function(a){console.log(":::: resumeInit ::::");if(vastAds&&vastAds.enabled&&!vastAds.shownVideo&&tritonAds&&tritonAds.enabled)return audioLive?radioplayer.emp.stop():radioplayer.emp.pause(),
!1;this.isLive()&&($("#progress-scrubber-playback-bar").is(":visible")||$("#progress-scrubber-playback-bar").show());$.proxy(this.hidePlay,this)();$.proxy(this.onAudible,this)()},resumeProxy:function(){(this.isLive()||this.isAllLoaded||this.userPaused)&&!this.noSupportShowing?(this.userPaused=!1,$.proxy(radioplayer.emp.resume,radioplayer.emp)()):(radioplayer.emp.audioArrayInteger=0,radioplayer.emp.audioPreference=0,radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime),radioplayer.emp.dataReady())},
init:function(){$("#controls h2").html(radioplayer.lang.controls.player_controls);$("#controls #play .accessibility-text").html(radioplayer.lang.controls.play);$("#controls #play").attr("title",radioplayer.lang.controls.play);$("#controls #pause .accessibility-text").html(radioplayer.lang.controls.pause);$("#controls #pause").attr("title",radioplayer.lang.controls.pause);$("#controls #stop .accessibility-text").html(radioplayer.lang.controls.stop);$("#controls #stop").attr("title",radioplayer.lang.controls.stop);
$("#controls #duration").html(radioplayer.lang.controls.loading);$("#volume-1").html(radioplayer.lang.controls.set_volume_20);$("#volume-2").html(radioplayer.lang.controls.set_volume_40);$("#volume-3").html(radioplayer.lang.controls.set_volume_60);$("#volume-4").html(radioplayer.lang.controls.set_volume_80);$("#volume-5").html(radioplayer.lang.controls.set_volume_100);$(".loading-indicator").html(radioplayer.lang.controls.loading);$(".play-prompt-indicator").html(radioplayer.lang.controls.play_prompt);
(radioplayer.consts.is_Android||radioplayer.consts.is_iOS)&&$("#volume-control").addClass("disabled");$(radioplayer.emp).on("update",$.proxy(this.onPositionUpdate,this)).on("volumeSet",$.proxy(this.onVolumeUpdate,this)).on("pausePlaying",$.proxy(this.showPlay,this)).on("ended",$.proxy(this.showPlay,this)).on("ended",$.proxy(this.onEnd,this)).on("stopped",$.proxy(this.showPlay,this)).on("cleanedup",$.proxy(this.resetDuration,this)).on("cleanedup",$.proxy(this.showLoader,this)).on("startPlaying",$.proxy(this.startPlayingInit,
this)).on("resumed",$.proxy(this.resumeInit,this)).on("durationSet",$.proxy(this.setDuration,this)).on("loadProgress",$.proxy(this.onLoadProgressUpdate,this)).on("securityError",$.proxy(this.logSecurityError,this)).on("pausePlaying",$.proxy(this.onSilent,this,"pause")).on("stopped",$.proxy(this.onSilent,this,"stop")).on("ended",$.proxy(this.onSilent,this,"stop")).on("pausePlaying",$.proxy(this.onStop,this)).on("stopped",$.proxy(this.onStop,this)).on("ended",$.proxy(this.onStop,this)).on("error",$.proxy(this.onError,
this)).on("noSupport",$.proxy(this.onNoSupport,this)).on("ioError",$.proxy(this.ioError,this)).on("metadata",$.proxy(radioplayer.playing.metadataReceived,this)).on("id3",$.proxy(radioplayer.playing.id3Received,this)).on("header",$.proxy(radioplayer.playing.headerReceived,this));$("#pause").on("click",$.proxy(this.onClickPause,this));$("#play").on("click",$.proxy(this.onClickPlay,this));$("#stop").on("click",$.proxy(this.onClickStop,this));$("#pause").on("click",$.proxy(radioplayer.emp.pause,radioplayer.emp));
$("#play").on("click",$.proxy(this.resumeProxy,this));$("#stop").on("click",$.proxy(radioplayer.emp.stop,radioplayer.emp));$("#volume-mute").on("click",$.proxy(this.mute,this));$("#volume-1").on("click",$.proxy(this,"setVolumeTo",20));$("#volume-2").on("click",$.proxy(this,"setVolumeTo",40));$("#volume-3").on("click",$.proxy(this,"setVolumeTo",60));$("#volume-4").on("click",$.proxy(this,"setVolumeTo",80));$("#volume-5").on("click",$.proxy(this,"setVolumeTo",100));$("#volume-control").on("mouseenter",
$.proxy(this.volumeIconMouseEnter,this)).on("mouseleave",$.proxy(this.volumeIconMouseLeave,this)).on("mousemove",$.proxy(this.volumeIconMouseMove,this)).on("mousedown",$.proxy(this.volumeIconMouseDown,this)).on("mouseup",$.proxy(this.volumeIconMouseUp,this)).on("click",$.proxy(this.volumeIconClick,this));$("#toggle-mystations").on("click",$.proxy(this.toggleMyStations,this));$("#progress-scrubber-handle").draggable({axis:"x",containment:"#progress-scrubber-container"}).on("drag",$.proxy(this.seek,
this)).on("dragstart",$.proxy(this.seekStart,this)).on("dragstop",$.proxy(this.seekStop,this));$("#progress-scrubber-background").on("click",$.proxy(this.progressBarClick,this));$("#progress-scrubber-container").on("mouseenter",$.proxy(this.mouseEnterProgress,this)).on("mouseleave",$.proxy(this.mouseLeaveProgress,this));(radioplayer.consts.is_iOS||radioplayer.consts.is_Android)&&$("#progress-scrubber-handle").addClass("progress-scrubber-handle-on");$("#od-strip").on("click","button.od-skip",function(){var a=
$(this).attr("data-offset");radioplayer.controls.showLoader();radioplayer.controls.seekOffset(a)});$(document).bind("contextmenu",function(a){radioplayer.utils.output("version:"+radioplayer.emp.getVersion())})}};
function createVideoHtml(){var a=null!=navigator.userAgent.match(/iPad/i),b="autoplay";radioplayer.consts.is_iOS&&a&&(b="playsinline autoplay");a='\x3cdiv class\x3d"vast-container" id\x3d"vast-container"\x3e\t\t\t\x3cdiv id\x3d"ima-video-container"\x3e\t\t\t\t\x3cvideo id\x3d"video-element" '+b+'\x3e\t\t\t\t\x3c/video\x3e\t\t\t\x3c/div\x3e\t\t\t\x3cdiv id\x3d"ima-ad-container" class\x3d"companion-container"\x3e      \x3c/div\x3e      \x3cdiv id\x3d"ima-play-button"\x3e        \x3cdiv id\x3d"ima-play-icon"\x3e          \x3cdiv id\x3d"ima-play-icon-triangle"\x3e\x3c/div\x3e        \x3c/div\x3e        \x3cdiv id\x3d"ima-play-text"\x3e          Play advert        \x3c/div\x3e      \x3c/div\x3e      \x3cdiv id\x3d"ima-skip-button"\x3e        Skip      \x3c/div\x3e    \x3c/div\x3e';
radioplayer.utils.resizeViewPort(720,665);radioplayer.services.overlay.vast(a,!0)}
function setUpIMA(){var a=document.getElementById("ima-ad-container");radioplayer.ima.adContainer=new google.ima.AdDisplayContainer(a,radioplayer.ima.videoContent);radioplayer.ima.adsLoader=new google.ima.AdsLoader(radioplayer.ima.adContainer);radioplayer.ima.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,onAdsManagerLoaded,!1);radioplayer.ima.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,onAdError,!1)}
function checkAutoplaySupport(){var a=null,b=!1,c=radioplayer.ima.videoContent.play();void 0!==c?c.then(function(){b=!0;clearTimeout(a);radioplayer.ima.videoContent.pause();radioplayer.ima.autoplayAllowed=!0;autoplayChecksResolved()}).catch(function(){b=!0;clearTimeout(a);radioplayer.ima.videoContent.pause();radioplayer.ima.autoplayAllowed=!1;autoplayChecksResolved()}):a=setTimeout(function(){b||(radioplayer.ima.videoContent.pause(),radioplayer.ima.autoplayAllowed=!1,autoplayChecksResolved())},500)}
function autoplayChecksResolved(){var a=new google.ima.AdsRequest,b=radioplayer.vast.vastResponse.length;if(b){var c=[],d=[],e=[],f=-1;if(1<b)for(var g=0;g<b;g++){var k=radioplayer.vast.vastResponse[g];if((k=k.getElementsByTagName("Ad"))&&k.length)for(var l=0;l<k.length;l++){var h=k[l];if(h.getElementsByTagName("Wrapper").length){var m=h.getElementsByTagName("Wrapper")[0].getElementsByTagName("Impression");if(m.length)for(var n=0;n<m.length;n++)e.push(m[n]);if((h=h.getElementsByTagName("Wrapper")[0].getElementsByTagName("Creatives"))&&
h.length&&(m=h[0].getElementsByTagName("Creative"))&&m.length)for(n=0;n<m.length;n++)if(h=m[n],(h=h.getElementsByTagName("Linear"))&&h.length)for(var t=0;t<h.length;t++)h[t].getElementsByTagName("TrackingEvents").length&&c.push(h[t].getElementsByTagName("TrackingEvents")),h[t].getElementsByTagName("VideoClicks").length&&d.push(h[t].getElementsByTagName("VideoClicks"))}else h.getElementsByTagName("InLine").length&&0>f&&(f=g)}}if(0<=f){if(k=radioplayer.vast.vastResponse[f],(k=k.getElementsByTagName("Ad"))&&
k.length&&(h=k[0],h.getElementsByTagName("InLine").length)){if(e&&e.length)for(b=e.length,g=0;g<b;g++)h.getElementsByTagName("InLine")[0].appendChild(e[g]);if((h=h.getElementsByTagName("InLine")[0].getElementsByTagName("Creatives"))&&h.length&&(m=h[0].getElementsByTagName("Creative"))&&m.length&&(h=m[0],(h=h.getElementsByTagName("Linear"))&&h.length)){h[0].getElementsByTagName("TrackingEvents").length||(e=document.createElementNS("http://www.w3.org/1999/xhtml","TrackingEvents"),h[0].appendChild(e));
for(var p=h[0].getElementsByTagName("TrackingEvents")[0],b=c.length,e=0;e<b;e++)g=c[e][0].getElementsByTagName("Tracking"),$(g).each(function(a){p.appendChild(this)});h[0].getElementsByTagName("VideoClicks").length||(e=document.createElementNS("http://www.w3.org/1999/xhtml","VideoClicks"),h[0].appendChild(e));for(var q=h[0].getElementsByTagName("VideoClicks")[0],c=d.length,e=0;e<c;e++)b=d[e][0].getElementsByTagName("ClickThrough"),$(b).each(function(a){q.appendChild(this)}),b=d[e][0].getElementsByTagName("ClickTracking"),
$(b).each(function(a){q.appendChild(this)}),b=d[e][0].getElementsByTagName("CustomClick"),$(b).each(function(a){q.appendChild(this)})}}}else f=0;a.adsResponse=(new XMLSerializer).serializeToString(radioplayer.vast.vastResponse[f])}else a.adTagUrl=radioplayer.vast.vastTag;radioplayer.ima.adsLoader.requestAds(a)}
function onAdsManagerLoaded(a){radioplayer.ima.adsManager=a.getAdsManager(radioplayer.ima.videoContent);radioplayer.ima.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,onContentResumeRequested);radioplayer.ima.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,adComplete);radioplayer.ima.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,adStarted);radioplayer.ima.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,adClicked);radioplayer.ima.videoContent.addEventListener("webkitendfullscreen",
function(){radioplayer.ima.skipButton.style.display="block"});a="ALL_ADS_COMPLETED CONTENT_RESUME_REQUESTED CONTENT_PAUSE_REQUESTED DURATION_CHANGE FIRST_QUARTILE IMPRESSION INTERACTION LINEAR_CHANGED LOG MIDPOINT PAUSED RESUMED SKIPPABLE_STATE_CHANGED SKIPPED THIRD_QUARTILE USER_CLOSE VOLUME_CHANGED VOLUME_MUTED LOADED AD_METADATA AD_BREAK_READY".split(" ");for(var b=a.length,c=0;c<b;c++)radioplayer.ima.adsManager.addEventListener(google.ima.AdEvent.Type[a[c]],miscAdEvent);radioplayer.ima.autoplayAllowed?
playAds():radioplayer.ima.playButton.style.display="block"}function playButtonClick(){radioplayer.ima.adContainer.initialize();radioplayer.ima.adsInitialized=!0;radioplayer.ima.playButton.style.display="none";radioplayer.ima.videoContent.load();radioplayer.ima.videoContent.addEventListener("loadedmetadata",function(){radioplayer.ima.hasLoaded||(radioplayer.ima.hasLoaded=!0,playAds())})}
function playAds(){try{radioplayer.ima.adsInitialized||(radioplayer.ima.adContainer.initialize(),radioplayer.ima.adsInitialized=!0);var a=radioplayer.utils.getViewportWidth();radioplayer.vast.vastSize.width>a&&(radioplayer.vast.vastSize.width=a,radioplayer.vast.vastSize.height=$(".radioplayer-plugin").height());radioplayer.ima.adsManager.init(radioplayer.vast.vastSize.width,radioplayer.vast.vastSize.height,google.ima.ViewMode.NORMAL);radioplayer.ima.adsManager.start()}catch(b){finishAds()}}
function adStarted(a){a=a.getAd();var b=new google.ima.CompanionAdSelectionSettings;b.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL;b.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL;b.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;a.getCompanionAds(radioplayer.vast.vastSize.width,radioplayer.vast.vastSize.height,b);radioplayer.vast.showSkipButton&&((a=a.getDuration())&&100>a&&(radioplayer.ima.rawDuration=a,radioplayer.vast.duration=
1E3*(a+radioplayer.vast.skipButtonBuffer)),radioplayer.vast.closeTimeout=setTimeout(function(){var a=radioplayer.ima.adsManager.getRemainingTime();radioplayer.ima.rawDuration<=a&&(radioplayer.ima.skipButton.style.display="block")},radioplayer.vast.duration||33E3));radioplayer.ima.hasStarted=!0}function adClicked(a){radioplayer.ima.paused||(radioplayer.ima.pauseTimeout=setTimeout(function(){radioplayer.ima.paused||manuallyPauseVideo()},500))}
function manuallyPauseVideo(){radioplayer.ima.paused=!0;radioplayer.ima.adsManager.pause();$("#vast-container").append('\x3cdiv id\x3d"vast-controls-overlay"\x3e    \x3cdiv id\x3d"ima-play-button"\x3e        \x3cdiv id\x3d"ima-play-icon"\x3e          \x3cdiv id\x3d"ima-play-icon-triangle"\x3e\x3c/div\x3e        \x3c/div\x3e        \x3cdiv id\x3d"ima-play-text"\x3e          Play advert        \x3c/div\x3e      \x3c/div\x3e    \x3c/div\x3e');$("#vast-controls-overlay").on("click",function(){clearTimeout(radioplayer.ima.pauseTimeout);
radioplayer.ima.adsManager.resume();radioplayer.ima.paused=!1;$(this).remove()})}function onContentResumeRequested(){setTimeout(function(){radioplayer.ima.adsManager&&radioplayer.ima.adsManager.destroy();radioplayer.services.overlay.hide()},500)}function adComplete(){finishAds()}function miscAdEvent(a){"pause"===a.type?radioplayer.ima.paused=!0:"resume"===a.type&&(clearTimeout(radioplayer.ima.pauseTimeout),radioplayer.ima.paused=!1)}
function skipAd(){radioplayer.ima.adsManager.skip();radioplayer.ima.adsManager.stop();finishAds()}function finishAds(){radioplayer.ima.hasStarted=!1;radioplayer.ima.hasLoaded=!1;radioplayer.utils.resizeViewPort(380,665);vastAds.shownVideo=!0;radioplayer.vast.closeTimeout&&clearTimeout(radioplayer.vast.closeTimeout);radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime);radioplayer.emp.dataReady();radioplayer.ima.adsLoader.contentComplete()}function onAdError(a){finishAds()}
radioplayer.ima={isVpaid:!1,adsInitialized:!1,videoContent:null,playButton:null,skipButton:null,adContainer:null,adsManager:{},autoplayAllowed:!1,hasLoaded:!1,hasStarted:!1,rawDuration:0,init:function(a){a&&(radioplayer.ima.isVpaid=!0,google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED));createVideoHtml();radioplayer.ima.playButton=document.getElementById("ima-play-button");radioplayer.ima.playButton.style.display="none";radioplayer.ima.videoContent=document.getElementById("video-element");
radioplayer.ima.skipButton=document.getElementById("ima-skip-button");radioplayer.ima.videoContent.src="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";radioplayer.ima.playButton.addEventListener("click",playButtonClick);radioplayer.ima.skipButton.addEventListener("click",
skipAd);setUpIMA();checkAutoplaySupport()}};function ajaxUtil(a,b,c){var d;d=window.XDomainRequest?new XDomainRequest:window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");d.onload=function(){pendingXDR=[];b&&b(d.responseXML)};d.open("GET",a,!0);d.onerror=function(a){};d.onprogress=function(a,b){a.srcElement&&a.srcElement.response&&c&&c(a)};d.ontimeout=function(){};d.send()}
function guid(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(a){return(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)})}
function parseStreamDataResponse(a){for(var b,c,d,e,f=a.getElementsByTagName("transport"),g=0;g<f.length;g++)f[g]&&f[g].innerHTML&&"hls"!==f[g].innerHTML&&"hlsts"!==f[g].innerHTML&&(b=f[g].innerHTML);f=a.getElementsByTagName("server");for(g=0;g<f.length;g++){for(var k=f[g].getElementsByTagName("ip"),l=0;l<k.length;l++)c=k[l].innerHTML;k=f[g].getElementsByTagName("port");for(l=0;l<k.length;l++)d=k[l].innerHTML}a=a.getElementsByTagName("mount");for(f=0;f<a.length;f++)e=a[f].innerHTML;a=".aac";f="aac";
-1<e.indexOf("MP3")&&(a=".mp3",f="http");b=b+"://"+(c+":");b+=d+"/";b+=e;return{url:b,audioType:f,audioExtension:a}}var _console={log:function(a){radioplayer.triton.DEBUG&&console.log("[TRITON]: "+a)}};
radioplayer.triton={DEBUG:!1,OD:!1,init:function(a){jQuery.ajax({url:"http://playerservices.live.streamtheworld.com/api/idsync.js?stationId\x3d"+tritonAds.stationId,dataType:"script",async:!0,cache:!1,xhrFields:{withCredentials:!0},beforeSend:function(a){a.withCredentials=!0},crossDomain:!0,success:function(b,c,d){radioplayer.triton.OD=!a;radioplayer.triton.OD||tritonAds.forceOD?radioplayer.triton.initOD():radioplayer.triton.initStream()}})},initOD:function(){vastAds.vastTag=tritonAds.tritonBase+
"/ondemand/ars?type\x3dpreroll\x26stid\x3d"+tritonAds.stationId+"\x26fmt\x3dvast\x26ua\x3d2Day%20FM/370%20CFNetwork/758.5.3%20Darwin/15.6.0";vastAds.enabled=!0;radioplayer.vast.init()},initStream:function(){var a=tritonAds.tritonBase+"/api/livestream?version\x3d1.9\x26";tritonAds.stationName?a+="station\x3d"+tritonAds.stationName:tritonAds.tritonMount&&(a+="mount\x3d"+tritonAds.tritonMount);ajaxUtil(a,radioplayer.triton.processStream)},processStream:function(a){var b=parseStreamDataResponse(a),c=
b.url,d=b.audioExtension,e=b.audioType,b=guid();window.audioArray[0].audioUrl=c+d+"?sbmid\x3d"+b;window.audioArray[0].audioType=e;radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime);radioplayer.emp.dataReady();d=null;a=a.getElementsByTagName("metadata");for(e=0;e<a.length;e++)for(var f=a[e].getElementsByTagName("sse-sideband"),g=0;g<f.length;g++)d=f[g].getAttribute("metadataSuffix");ajaxUtil(c+d+"?sbmid\x3d"+b,null,radioplayer.triton.parseSidebandMetadata)},parseSidebandMetadata:function(a){if(-1<
a.srcElement.response.indexOf("data:")){a=a.srcElement.response.split("\n").join("");a=a.split("data:").join("");a=a.split('{\t"type"');for(var b=[],c=0;c<a.length;c++)a[c]&&1<a[c].length&&(a[c]='{\t"type"'+a[c],b.push(JSON.parse(a[c])))}b.length&&b[b.length-1]&&b[b.length-1].name&&"ad"===b[b.length-1].name&&radioplayer.triton.handleSidebandAd(b[b.length-1])},handleSidebandAd:function(a){a.parameters=a.parameters||{};!a.parameters.ad_vast&&a.parameters.ad_vast_url&&(vastAds.enabled=!0,vastAds.vastTag=
a.parameters.ad_vast_url,radioplayer.vast.init(parseInt(a.parameters.cue_time_duration,10)))}};
var vastTests=[],customVastURLHandler=function(){function a(){}a.currentVast=[];a.xhr=function(){var a;a=new window.XMLHttpRequest;if("withCredentials"in a)return a};a.supported=function(){return!!this.xhr()};a.shouldMakeRequest=function(b){for(var c=a.currentVast.length-1;0<=c;c--){var d=a.currentVast[c];if(d.url===b)return d.response}return!1};a.get=function(b,c,d){var e=this.shouldMakeRequest(b);if(e)return setTimeout(function(){d(null,e)},13),null;var f;if("https:"===window.location.protocol&&
0===b.indexOf("http://"))return d(Error("Cannot go from HTTPS to HTTP."));try{return f=this.xhr(),f.open("GET",b),f.timeout=c.timeout||0,f.withCredentials=c.withCredentials||!1,f.overrideMimeType&&f.overrideMimeType("text/xml"),f.onreadystatechange=function(){if(4===f.readyState)return a.currentVast.push({url:b,response:f.responseXML}),radioplayer.vast.vastResponse.push(f.responseXML),d(null,f.responseXML)},f.send()}catch(g){return d()}};return a}();
function vastDataPromise(a){var b=$.Deferred(),c=setTimeout(function(){b.reject()},5E3),d={withCredentials:!0};d.urlhandler=radioplayer.consts.customVastURLHandler||customVastURLHandler;DMVAST.client.get(a,d,function(a){a?(clearTimeout(c),b.resolve(a)):(clearTimeout(c),b.reject())});return b.promise()}
function canPlayVideo(a,b){var c=document.createElement("video");return("function"!==typeof c.canPlayType?"no":null===b||""===b||"undefined"===typeof b?c.canPlayType(a):c.canPlayType(a+';codecs\x3d"'+b+'"'))||"no"}
function parseVastResponse(a){for(var b={ad:"",adType:"",creative:"",companion:"",companionType:""},c=0;c<a.ads.length;c++)for(var d=a.ads[c],e=0;e<d.creatives.length;e++){var f=d.creatives[e];switch(f.type){case "linear":for(var g=0;g<f.mediaFiles.length;g++){var k=f.mediaFiles[g];if(k.width<=radioplayer.vast.maxAdSize.width&&k.height<=radioplayer.vast.maxAdSize.height)if("application/x-shockwave-flash"===k.mimeType){b.ad=d;b.mediaFile=k;b.creative=f;b.adType="flash";break}else if("audio/mpeg"===
k.mimeType){b.ad=d;b.mediaFile=k;b.creative=f;b.adType="audio";break}else if("application/javascript"===k.mimeType){b.ad=d;b.mediaFile=k;b.creative=f;b.adType="video";b.tryIMA=!0;break}else if("probably"===canPlayVideo(k.mimeType,k.codec)||"maybe"===canPlayVideo(k.mimeType,k.codec)){b.ad=d;b.mediaFile=k;b.creative=f;b.adType="video";break}}break;case "companion":for(g=0;g<f.variations.length;g++)if(k=f.variations[g],k.width<=radioplayer.vast.maxCompanionSize.width&&k.height<=radioplayer.vast.maxCompanionSize.height)switch(k.type){case "image/gif":case "image/png":case "image/jpg":case "image/jpeg":b.companion=
k;b.companionType="image";break;case "text/html":b.companion=k;b.companionType="html";break;default:b.companion=k,b.companionType="iframe"}}}return b}
function returnCompanionHtml(a){return"image"===a.companionType?'\x3cdiv\x3e\r\n\t\t\t\x3ca target\x3d"_blank" href\x3d"'+a.companion.companionClickThroughURLTemplate+'"\x3e\r\n\t\t\t\t\x3cimg src\x3d"'+a.companion.staticResource+'" width\x3d"'+a.companion.width+'" height\x3d"'+a.companion.height+'"/\x3e\r\n\t\t\t\x3c/a\x3e\r\n\t\t\x3c/div\x3e':"text"===a.companionType?"\x3cdiv\x3e"+a.companion.htmlResource+"\x3c/div\x3e":a.companion.iframeResource?'\x3cdiv\x3e\r\n\t\t\t\x3ciframe src\x3d"'+(a.companion.staticResource||
a.companion.iframeResource)+'" width\x3d"'+a.companion.width+'" height\x3d"'+a.companion.height+'"\x3e\r\n\t\t\x3c/div\x3e':"\x3cdiv\x3e"+a.companion.htmlResource+"\x3c/div\x3e"}var errors={gettingVastData:function(a){radioplayer.vast.dispose()},noAdContent:function(a){radioplayer.vast.dispose()}};
radioplayer.vast={showSkipButton:!0,skipButtonBuffer:3,maxAdSize:{width:1E3,height:700},maxCompanionSize:{width:720,height:527},vastSize:{width:0,height:0},enabled:!1,vastTag:null,autoplayTimeout:null,closeTimeout:null,vastResponse:[],init:function(){this.enabled=vastAds.enabled||!1;this.vastTag=vastAds.vastTag||"";vastAds.disableSkipButton&&"false"!==vastAds.disableSkipButton&&(this.showSkipButton=!1);vastAds.skipButtonBuffer&&(this.skipButtonBuffer=vastAds.skipButtonBuffer);if(radioplayer.querystring&&
radioplayer.querystring.vast){var a=parseInt(radioplayer.querystring.vast,10);this.vastTag=vastTests[a]}this.enabled&&this.vastTag&&(radioplayer.vast.vastSize.width=radioplayer.vast.maxCompanionSize.width,radioplayer.vast.vastSize.height=radioplayer.vast.maxCompanionSize.height,this.getVastData(this.vastTag))},getVastData:function(a){vastDataPromise(a).done(radioplayer.vast.gotVastData).fail(errors.gettingVastData)},gotVastData:function(a){if(!a||!a.ads)return errors.noAdContent(a);(a=parseVastResponse(a))&&
a.ad?radioplayer.vast.startPlayer(a,a.companion):a&&a.companion?radioplayer.vast.companionOnly(a):radioplayer.ima.init(!0)},startPlayer:function(a,b){"video"===a.adType?radioplayer.ima.init(!1):"audio"===a.adType?radioplayer.ima.init(!1):"flash"===a.adType&&this.initIFrame(a,b)},initAdvertAudio:function(a,b){if(!a.mediaFile||!a.mediaFile.fileURL)return radioplayer.vast.dispose();window.audioArray.unshift({audioUrl:a.mediaFile.fileURL,audioType:a.mediaFile.mimeType||null});radioplayer.emp.init(window.audioArray,
window.audioLive,window.bufferTime);radioplayer.emp.dataReady()},companionOnly:function(a){if("iframe"===a.companionType&&a.companion.staticResource)return a.mediaFile=a.companion,a.mediaFile.fileURL=a.companion.staticResource,radioplayer.vast.initIFrame(a);a='\x3cdiv class\x3d"vast-container" id\x3d"vast-container"\x3e\r\n\t\t\t\x3cdiv id\x3d"vast-companion-container" class\x3d"companion-container"\x3e\r\n\t\t\t\t'+returnCompanionHtml(a)+"\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e";window.resizeTo(720,
665);radioplayer.services.overlay.vast(a,!0);radioplayer.vast.closeTimeout=setTimeout(function(){radioplayer.vast.dispose()},radioplayer.vast.duration||3E4)},initIFrame:function(a){var b,c=(this.vastSize.width-a.mediaFile.width)/2;b='\x3cdiv class\x3d"vast-container" id\x3d"vast-container"\x3e\x3cdiv class\x3d"close-vast-btn-container"\x3e\x3cbutton class\x3d"close-vast-btn" id\x3d"closeVASTBtn"\x3e\x3cspan\x3e\x26times;\x3c/span\x3e\x3clabel class\x3d"close-vast-btn-label accessibility-text" for\x3d"closeVASTBtn"\x3eClose Ad\x3c/label\x3e\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"vast-flash-container"\x3e'+
('\x3cobject class\x3d"vast-flash-obj" id\x3d"vastAdObj" style\x3d"width: '+a.mediaFile.width+"px; height: "+a.mediaFile.height+"px; margin: 0 "+c+'px;"\x3e');b+='\x3cparam name\x3d"movie" value\x3d"'+a.mediaFile.fileURL+'" /\x3e';b+='\x3cembed class\x3d"vast-flash-embed" id\x3d"'+this.videoPlayerId+'" src\x3d"'+a.mediaFile.fileURL+'" style\x3d"width: '+a.mediaFile.width+"px; height: "+a.mediaFile.height+"px; margin: 0 "+c+'px;" type\x3d"application/x-shockwave-flash"\x3e\x3c/embed\x3e';b+='\x3c/object\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"vast-companion-container" class\x3d"companion-container"\x3e\x3c/div\x3e';
window.resizeTo(720,665);radioplayer.services.overlay.vast(b);$("#closeVASTBtn").on("click",function(){radioplayer.vast.closeTimeout&&clearTimeout(radioplayer.vast.closeTimeout);radioplayer.vast.dispose()});radioplayer.vast.closeTimeout=setTimeout(function(){radioplayer.vast.dispose()},radioplayer.vast.duration||3E4)},dispose:function(){radioplayer.vast.closeTimeout&&clearTimeout(radioplayer.vast.closeTimeout);radioplayer.utils.resizeViewPort(380,665);radioplayer.services.overlay.hide();$("#vast-container").remove();
vastAds.shownVideo=!0;radioplayer.emp.init(window.audioArray,window.audioLive,window.bufferTime);radioplayer.emp.dataReady()}};