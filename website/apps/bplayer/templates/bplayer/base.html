{% load compress cms_tags sekizai_tags menu_tags bplayer_tags i18n pushy_tags %}<!doctype html>
<html class="no-js" lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>{% block title %}{% endblock %}</title>

    <meta name="description" content="{% block meta_description %}{% endblock %}"/>
    <meta name="keywords" content="{% block meta_keywords %}{% endblock %}"/>
    <meta name="author" content="hazelfire gmbh"/>
    <meta name="generator" content="A.W.F."/>
    <meta name="version" content="bouncing beaver | 11.09.01 | 201110011"/>

    <meta property="fb:app_id" content="154969748635"/>
    {% block meta_opengraph %}{% endblock %}

    <link rel="icon" type="image/png" href="{{ STATIC_URL }}img/base/favicon.gif"/>
    <link rel="shortcut icon" type="image/x-icon" href="{{ STATIC_URL }}img/base/favicon.gif">

    <link rel="stylesheet" href="{{ STATIC_URL }}css/legacy.css"/>
    <link rel="stylesheet" href="{{ STATIC_URL }}css/screen.css"/>


    <link rel="stylesheet" href="{{ STATIC_URL }}css/iconset/fontcustom.css"/>
    <script src="{{ STATIC_URL }}js/lib/modernizr.js"></script>
    <script src="{{ STATIC_URL }}js/lib/jquery-2.1.0.js"></script>


    <!-- typo -->
    <script type="text/javascript">
        (function (d) {
            var config = {
                        kitId: 'rlf4umv',
                        scriptTimeout: 3000
                    },
                    h = d.documentElement, t = setTimeout(function () {
                        h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive";
                    }, config.scriptTimeout), tk = d.createElement("script"), f = false, s = d.getElementsByTagName("script")[0], a;
            h.className += " wf-loading";
            tk.src = '//use.typekit.net/' + config.kitId + '.js';
            tk.async = true;
            tk.onload = tk.onreadystatechange = function () {
                a = this.readyState;
                if (f || a && a != "complete" && a != "loaded")return;
                f = true;
                clearTimeout(t);
                try {
                    Typekit.load(config)
                } catch (e) {
                }
            };
            s.parentNode.insertBefore(tk, s)
        })(document);
    </script>


</head>
<body id="popup" class="{% block body_extra_class %}{% endblock %}">

<div class="container" id="content_popup" style="padding-top: 0;">

    <div id="bplayer_message_container">
        <p>{% trans "Loading Player" %}</p>
    </div>



    <!-- image holder -->
    <div id="bplayer_image_container"><!-- dynamic content --></div>

    {% bplayer_inline %}

</div>


<!-- other libraries -->
<script src="{{ STATIC_URL }}js/lib/raphael-min.js"></script>
<script src="{{ STATIC_URL }}js/lib/nunjucks/nunjucks-dev.js"></script>
<script src="{{ STATIC_URL }}js/lib/nunjucks/filters.js"></script>
<script src="{{ STATIC_URL }}js/lib/featherlight.js"></script>


<!-- global scripts -->
<script src="{{ STATIC_URL }}js/lib/ba-debug.js"></script>
<script src="{{ STATIC_URL }}js/lib/jquery.nanoscroller.js"></script>
<script src="{{ STATIC_URL }}js/lib/jquery.qtip.js"></script>
<script src="{{ STATIC_URL }}js/site.js"></script>
<script src="{{ STATIC_URL }}js/util.base.js"></script>

{% pushy_scripts %}


<!-- app scripts -->
<script src="{{ STATIC_URL }}bplayer/js/lib/sm2/soundmanager2.js"></script>
<script src="{{ STATIC_URL }}bplayer/js/remote.js"></script>

<script src="{{ STATIC_URL }}arating/js/base.js"></script>
<script src="{{ STATIC_URL }}alibrary/js/playlist.collector.js"></script>



<script src="{{ STATIC_URL }}js/lib/fd5/foundation.min.js"></script>


<script>
    var fd5_settings = {
        topbar: {
            is_hover: true
        },
        dropdown: {
            is_hover: true
        },
        tooltips: {
            tooltip_class: '.tooltip',
            touch_close_text: 'tap to close',
            disable_for_touch: false
        }
    };

    $(function () {

        $(document).foundation(fd5_settings);

    });

</script>

<script>

    var bplayer;
    var collector;
    var nj;
    $(function () {



        /******************************************************
         * template [js] rendering
         ******************************************************/
        if (!nunjucks.env) {
            nunjucks.env = new nunjucks.Environment(new nunjucks.HttpLoader('{{ STATIC_URL }}'));
        }
        nj = nunjucks.env;
        nj = nunjucks_register_filters(nj);



        /******************************************************
         * player handling
         ******************************************************/

        bplayer = new BPlayerApp();
        bplayer.mode = 'remote';
        bplayer.static_url = '{{ STATIC_URL }}';

        setTimeout(function(){
            bplayer.init();
        }, 1000)


        /*
        if (bplayer == undefined) {
            bplayer = new BPlayerApp();
            bplayer.mode = 'remote';
            bplayer.static_url = '{{ STATIC_URL }}';
            bplayer.init();
        } else {
            bplayer.attach();
        }
        */

        /******************************************************
         * playlist collector
         ******************************************************/

        /**/
        collector = new CollectorApp;
        collector.api_url = "{% url "api_dispatch_list" resource_name='playlist' api_name='v1'%}";
        collector.init();




    });
</script>


{% render_block "js-post" %}




</body>
</html>
