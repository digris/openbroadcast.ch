// positioning
$bplayer-hight-compact: 44px
$bplayer-bottom-hidden: -$bplayer-hight-compact
$bplayer-bottom-compact: 0px
$bplayer-bottom-expanded: 0px




#bplayer_container

  z-index: 100

  position: fixed
  width: 100%

  // hidden on load
  bottom: $bplayer-bottom-hidden

  // visible on load
  // bottom: $bplayer-bottom-compact

  //bottom: -140px
  //bottom: -72px
  //bottom: -122px


  padding-top: 4px
  padding-bottom: 0px

  .actions
    margin-bottom: 6px
    padding-left: 12px
    padding-right: 12px
    [data-bplayer-controls="pause"]
      display: none

    a
      color: #fff

    .totals
      color: #fff



  .information ul
    margin-bottom: 0
    color: #fff

  // small version, no waveform
  .progress
    @include progress-container()
    border: none
    padding: 0
    margin: 0 12px 0

  // large version, incl. waveform
  .playhead .background
    background-color: $secondary-color
    +transition-property(background-color)
    +transition-duration(0.2s)

  .playhead .indicator
    background: url('/static/bplayer/img/playhead.indicator.png')
    background-repeat: repeat-y

  .playhead .loading
    //background: none
    background: url('/static/bplayer/img/playhead.loading.png')
    background-repeat: no-repeat
    background-position-y: bottom
    background-size: 2000px 4px


  .playhead .waveform
    height: 60px
    +transition-property(height)
    +transition-duration(0.1s)
    > img
      max-height: 60px
      +opacity(1.0)
      +transition-property(opacity)
      +transition-duration(0.1s)

  // remove image for compact player
  &.style-compact .playhead .waveform
    height: 20px
    +transition-property(height)
    +transition-duration(0.2s)
    > img
      +opacity(0.0)
      +transition-property(opacity)
      +transition-duration(0.2s)

  // hm... ?
  &.ready, &.init
    bottom: $bplayer-bottom-hidden
    //display: none
    .playhead .waveform
      height: 0px
      +transition-property(height)
      +transition-duration(0.2s)

  // state dependant styles
  &.paused
    bottom: $bplayer-bottom-compact
    +single-transition(bottom 0.2s)

  &.playing, &.loading
    bottom: $bplayer-bottom-compact
    +single-transition(bottom 0.2s)

    // hide actions
    ul.actions,
      [data-bplayer-controls="resume"]
        display: none
      [data-bplayer-controls="pause"]
        display: block

    .playhead .background
      background-color: $primary-color
      +transition-property(background-color)
      +transition-duration(0.1s)

  // playlist container
  #bplayer_playlist_container
    height: auto
    width: 680px
    float: left

  .controls-left
    width: 30px
    float: left
    padding: 0px 0 0 7px

  .controls-right
    width: 35px
    float: right


////////////////////////////////////////////////////////////////
// controls for playlist items
////////////////////////////////////////////////////////////////
#bplayer_container
  .playlist
    .item
      .controls .pause
        display: none
    .item.playing
      .controls .play
        display: none
      .controls .pause
        display: inline



// kind of ugly overrides for 'paused' state
body.paused #bplayer_container
  .playlist
    .item.playing
      .controls .play
        display: inline
      .controls .pause
        display: none



// history mode switch
#bplayer_container

  .base
    background: #000
    padding: 8px 0 2px
    box-shadow: 0px -1px 3px 1px rgba(51, 51, 51, 0.16)
    width: 760px

  .wave
    background: #000

  section.playlist.history
    &.compact
      display: block
    &.expanded
      display: none

  &.show-history
    box-shadow: -2px -2px 3px 1px rgba(51, 51, 51, 0.16)
    background: #000
    #bplayer_playlist_container
      height: auto
      max-height: 300px
      overflow-y: auto
      width: auto
      float: none
    .base
      width: auto
      background: none
      padding: 0
      box-shadow: none

    // playlist display
    section.playlist.history
      &.compact
        display: none
      &.expanded
        display: block

    // actions display
    .controls-left
      display: none
    .controls-right
      display: none

    .actions-expanded
      position: absolute
      right: 0
      top: 0
      display: block
      padding: 6px 6px 0 0
      a
        color: white






  // history styles
  section.playlist.history.compact
    .item
      display: none
      padding: 5px 0 0 10px
      a, span
        color: white
      span
        +opacity(0.5)
    .item.playing
      display: block

  section.playlist.history.expanded
    .header
      padding: 4px 0
      margin: 4px 0
      +opacity(0.7)
      color: #fff
    .item
      color: rgba(255, 255, 255, 0.5)
      display: block
      padding: 4px 0
      margin: 4px 0
      border-top: 1px solid rgba(255, 255, 255, 0.1)
      padding: 4px 0

      &.hover
        color: #fff
      &.playing
        font-style: italic
        color: #fff

      &.hover,
      &.playing
        .col-action a
          color: #fff

  section.playlist.history.expanded
    width: 83%
    margin: 0 auto 20px

    .col-airtime
      width: 14%
    .col-action
      a
        color: rgba(255, 255, 255, 0.5)
      width: 4%
    .col-name
      width: 22%
      // added 17% as long as buying is not available - see below
      width: 39%
    .col-artist
      width: 22%
      // added 17% as long as buying is not available - see below
      width: 39%

    // price & buy are not available yet - just here for the futureâ„¢
    // using 34% together
    .col-price
      width: 24%
      .price
        color: #ffffff
      .increase-step
        font-size: rem-calc(12)
        color: rgba(255, 255, 255, 0.8)
      .increase-time
        font-size: rem-calc(12)
        color: #F00
    .col-buy
      a
        color: white
      width: 10%





//////////////////////////////////////////////////////
// responsive overrides
//////////////////////////////////////////////////////
@media #{$small-only}
  #bplayer_container
    +clearfix()
    background: #000
    height: 60px
    bottom: 0px !important // always visible on small display

    &.init,
    &.ready
      .controls-left,
      .controls-right

        a
          //color: #000

    &.playing,
    &.playing
      bottom: 0px

    .base
      background: transparent
      width: 100%


    .controls-left
      position: absolute
      float: none
      left: 0
      width: 50px
      padding-left: 14px
      a
        font-size: rem-calc(24)

    .controls-right
      position: absolute
      right: 0
      float: none
      width: 50px
      padding-left: 0
      a
        font-size: rem-calc(34)
        line-height: 100%

    // mid column, holds content from nj/***
    #bplayer_playlist_container
      position: absolute
      float: none
      left: 50px
      .playlist
        .item
          font-size: rem-calc(13)
          line-height: 140%
          padding: 1px 0 0 10px
          &.history.compact
            top: 7px
            position: relative


// visible playlist
@media #{$small-only}
  #bplayer_container.show-history
    // full height on mobile devives
    height: 100vh
    #bplayer_playlist_container
      width: 100%
      max-height: 100vh
      left: 0
      .playlist
        padding-top: 84px
        width: 100%
        .col-action
          width: 10%
          a
            font-size: rem-calc(20)
        .col-airtime
          width: 18%
        .col-name
          width: 70%


        .item
          font-size: rem-calc(13)
          line-height: 140%
          padding: 1px 0 0 10px
          &.history.compact
            top: 7px
            position: relative


    // TODO: this is a hack! improve structure & handling
    .actions-expanded
      right: 43px
      bottom: 0px

      ul
        position: fixed
        bottom: 10px
        margin: 0

      a
        font-size: rem-calc(34)
        line-height: 100%